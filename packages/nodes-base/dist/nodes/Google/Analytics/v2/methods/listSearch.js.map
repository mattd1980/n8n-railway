{"version":3,"sources":["../../../../../../nodes/Google/Analytics/v2/methods/listSearch.ts"],"sourcesContent":["import type {\n\tILoadOptionsFunctions,\n\tINodeListSearchItems,\n\tINodeListSearchResult,\n} from 'n8n-workflow';\n\nimport { sortLoadOptions } from '../helpers/utils';\nimport { googleApiRequest } from '../transport';\n\nexport async function searchProperties(\n\tthis: ILoadOptionsFunctions,\n): Promise<INodeListSearchResult> {\n\tconst returnData: INodeListSearchItems[] = [];\n\n\tconst { accounts } = await googleApiRequest.call(\n\t\tthis,\n\t\t'GET',\n\t\t'',\n\t\t{},\n\t\t{},\n\t\t'https://analyticsadmin.googleapis.com/v1alpha/accounts',\n\t);\n\n\tfor (const acount of accounts || []) {\n\t\tconst { properties } = await googleApiRequest.call(\n\t\t\tthis,\n\t\t\t'GET',\n\t\t\t'',\n\t\t\t{},\n\t\t\t{ filter: `parent:${acount.name}` },\n\t\t\t'https://analyticsadmin.googleapis.com/v1alpha/properties',\n\t\t);\n\n\t\tif (properties && properties.length > 0) {\n\t\t\tfor (const property of properties) {\n\t\t\t\tconst name = property.displayName;\n\t\t\t\tconst value = property.name.split('/')[1] || property.name;\n\t\t\t\tconst url = `https://analytics.google.com/analytics/web/#/p${value}/`;\n\t\t\t\treturnData.push({ name, value, url });\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tresults: sortLoadOptions(returnData),\n\t};\n}\n\nexport async function searchViews(this: ILoadOptionsFunctions): Promise<INodeListSearchResult> {\n\tconst returnData: INodeListSearchItems[] = [];\n\tconst { items } = await googleApiRequest.call(\n\t\tthis,\n\t\t'GET',\n\t\t'',\n\t\t{},\n\t\t{},\n\t\t'https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles',\n\t);\n\n\tfor (const item of items) {\n\t\treturnData.push({\n\t\t\tname: `${item.name} [${item.websiteUrl}]`,\n\t\t\tvalue: item.id,\n\t\t\turl: `https://analytics.google.com/analytics/web/#/report-home/a${item.accountId}w${item.internalWebPropertyId}p${item.id}`,\n\t\t});\n\t}\n\n\treturn {\n\t\tresults: sortLoadOptions(returnData),\n\t};\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,mBAAgC;AAChC,uBAAiC;AAEjC,eAAsB,mBAEY;AACjC,QAAM,aAAqC,CAAC;AAE5C,QAAM,EAAE,SAAS,IAAI,MAAM,kCAAiB;AAAA,IAC3C;AAAA,IACA;AAAA,IACA;AAAA,IACA,CAAC;AAAA,IACD,CAAC;AAAA,IACD;AAAA,EACD;AAEA,aAAW,UAAU,YAAY,CAAC,GAAG;AACpC,UAAM,EAAE,WAAW,IAAI,MAAM,kCAAiB;AAAA,MAC7C;AAAA,MACA;AAAA,MACA;AAAA,MACA,CAAC;AAAA,MACD,EAAE,QAAQ,UAAU,OAAO,IAAI,GAAG;AAAA,MAClC;AAAA,IACD;AAEA,QAAI,cAAc,WAAW,SAAS,GAAG;AACxC,iBAAW,YAAY,YAAY;AAClC,cAAM,OAAO,SAAS;AACtB,cAAM,QAAQ,SAAS,KAAK,MAAM,GAAG,EAAE,CAAC,KAAK,SAAS;AACtD,cAAM,MAAM,iDAAiD,KAAK;AAClE,mBAAW,KAAK,EAAE,MAAM,OAAO,IAAI,CAAC;AAAA,MACrC;AAAA,IACD;AAAA,EACD;AACA,SAAO;AAAA,IACN,aAAS,8BAAgB,UAAU;AAAA,EACpC;AACD;AAEA,eAAsB,cAAyE;AAC9F,QAAM,aAAqC,CAAC;AAC5C,QAAM,EAAE,MAAM,IAAI,MAAM,kCAAiB;AAAA,IACxC;AAAA,IACA;AAAA,IACA;AAAA,IACA,CAAC;AAAA,IACD,CAAC;AAAA,IACD;AAAA,EACD;AAEA,aAAW,QAAQ,OAAO;AACzB,eAAW,KAAK;AAAA,MACf,MAAM,GAAG,KAAK,IAAI,KAAK,KAAK,UAAU;AAAA,MACtC,OAAO,KAAK;AAAA,MACZ,KAAK,6DAA6D,KAAK,SAAS,IAAI,KAAK,qBAAqB,IAAI,KAAK,EAAE;AAAA,IAC1H,CAAC;AAAA,EACF;AAEA,SAAO;AAAA,IACN,aAAS,8BAAgB,UAAU;AAAA,EACpC;AACD;","names":[]}