{"version":3,"sources":["../../../../../../../nodes/BambooHr/v1/actions/employeeDocument/upload/execute.ts"],"sourcesContent":["import type { IDataObject, IExecuteFunctions } from 'n8n-workflow';\n\nimport { apiRequest } from '../../../transport';\n\nexport async function upload(this: IExecuteFunctions, index: number) {\n\tlet body: IDataObject = {};\n\tconst requestMethod = 'POST';\n\n\tconst id: string = this.getNodeParameter('employeeId', index) as string;\n\tconst category = this.getNodeParameter('categoryId', index) as string;\n\tconst options = this.getNodeParameter('options', index);\n\tconst binaryPropertyName = this.getNodeParameter('binaryPropertyName', index);\n\tconst { fileName, mimeType } = this.helpers.assertBinaryData(index, binaryPropertyName);\n\tconst binaryDataBuffer = await this.helpers.getBinaryDataBuffer(index, binaryPropertyName);\n\n\tbody = {\n\t\tjson: false,\n\t\tformData: {\n\t\t\tfile: {\n\t\t\t\tvalue: binaryDataBuffer,\n\t\t\t\toptions: {\n\t\t\t\t\tfilename: fileName,\n\t\t\t\t\tcontentType: mimeType,\n\t\t\t\t},\n\t\t\t},\n\t\t\tfileName,\n\t\t\tcategory,\n\t\t},\n\t\tresolveWithFullResponse: true,\n\t};\n\n\tif (options.hasOwnProperty('share') && body.formData) {\n\t\tObject.assign(body.formData, options.share ? { share: 'yes' } : { share: 'no' });\n\t}\n\t//endpoint\n\tconst endpoint = `employees/${id}/files`;\n\tconst { headers } = await apiRequest.call(this, requestMethod, endpoint, {}, {}, body);\n\treturn this.helpers.returnJsonArray({ fileId: headers.location.split('/').pop() });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,uBAA2B;AAE3B,eAAsB,OAAgC,OAAe;AACpE,MAAI,OAAoB,CAAC;AACzB,QAAM,gBAAgB;AAEtB,QAAM,KAAa,KAAK,iBAAiB,cAAc,KAAK;AAC5D,QAAM,WAAW,KAAK,iBAAiB,cAAc,KAAK;AAC1D,QAAM,UAAU,KAAK,iBAAiB,WAAW,KAAK;AACtD,QAAM,qBAAqB,KAAK,iBAAiB,sBAAsB,KAAK;AAC5E,QAAM,EAAE,UAAU,SAAS,IAAI,KAAK,QAAQ,iBAAiB,OAAO,kBAAkB;AACtF,QAAM,mBAAmB,MAAM,KAAK,QAAQ,oBAAoB,OAAO,kBAAkB;AAEzF,SAAO;AAAA,IACN,MAAM;AAAA,IACN,UAAU;AAAA,MACT,MAAM;AAAA,QACL,OAAO;AAAA,QACP,SAAS;AAAA,UACR,UAAU;AAAA,UACV,aAAa;AAAA,QACd;AAAA,MACD;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,IACA,yBAAyB;AAAA,EAC1B;AAEA,MAAI,QAAQ,eAAe,OAAO,KAAK,KAAK,UAAU;AACrD,WAAO,OAAO,KAAK,UAAU,QAAQ,QAAQ,EAAE,OAAO,MAAM,IAAI,EAAE,OAAO,KAAK,CAAC;AAAA,EAChF;AAEA,QAAM,WAAW,aAAa,EAAE;AAChC,QAAM,EAAE,QAAQ,IAAI,MAAM,4BAAW,KAAK,MAAM,eAAe,UAAU,CAAC,GAAG,CAAC,GAAG,IAAI;AACrF,SAAO,KAAK,QAAQ,gBAAgB,EAAE,QAAQ,QAAQ,SAAS,MAAM,GAAG,EAAE,IAAI,EAAE,CAAC;AAClF;","names":[]}