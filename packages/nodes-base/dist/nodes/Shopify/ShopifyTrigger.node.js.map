{"version":3,"sources":["../../../nodes/Shopify/ShopifyTrigger.node.ts"],"sourcesContent":["import { createHmac } from 'crypto';\nimport {\n\ttype IHookFunctions,\n\ttype IWebhookFunctions,\n\ttype IDataObject,\n\ttype INodeType,\n\ttype INodeTypeDescription,\n\ttype IWebhookResponseData,\n\tNodeConnectionTypes,\n} from 'n8n-workflow';\n\nimport { shopifyApiRequest } from './GenericFunctions';\n\nexport class ShopifyTrigger implements INodeType {\n\tdescription: INodeTypeDescription = {\n\t\tdisplayName: 'Shopify Trigger',\n\t\tname: 'shopifyTrigger',\n\t\ticon: 'file:shopify.svg',\n\t\tgroup: ['trigger'],\n\t\tversion: 1,\n\t\tsubtitle: '={{$parameter[\"event\"]}}',\n\t\tdescription: 'Handle Shopify events via webhooks',\n\t\tdefaults: {\n\t\t\tname: 'Shopify Trigger',\n\t\t},\n\t\tinputs: [],\n\t\toutputs: [NodeConnectionTypes.Main],\n\t\tcredentials: [\n\t\t\t{\n\t\t\t\tname: 'shopifyApi',\n\t\t\t\trequired: true,\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tauthentication: ['apiKey'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'shopifyAccessTokenApi',\n\t\t\t\trequired: true,\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tauthentication: ['accessToken'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'shopifyOAuth2Api',\n\t\t\t\trequired: true,\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tauthentication: ['oAuth2'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\twebhooks: [\n\t\t\t{\n\t\t\t\tname: 'default',\n\t\t\t\thttpMethod: 'POST',\n\t\t\t\tresponseMode: 'onReceived',\n\t\t\t\tpath: 'webhook',\n\t\t\t},\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tdisplayName: 'Authentication',\n\t\t\t\tname: 'authentication',\n\t\t\t\ttype: 'options',\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Access Token',\n\t\t\t\t\t\tvalue: 'accessToken',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'OAuth2',\n\t\t\t\t\t\tvalue: 'oAuth2',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'API Key',\n\t\t\t\t\t\tvalue: 'apiKey',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: 'apiKey',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Trigger On',\n\t\t\t\tname: 'topic',\n\t\t\t\ttype: 'options',\n\t\t\t\tdefault: '',\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'App Uninstalled',\n\t\t\t\t\t\tvalue: 'app/uninstalled',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Cart Created',\n\t\t\t\t\t\tvalue: 'carts/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Cart Updated',\n\t\t\t\t\t\tvalue: 'carts/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Checkout Created',\n\t\t\t\t\t\tvalue: 'checkouts/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Checkout Delete',\n\t\t\t\t\t\tvalue: 'checkouts/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Checkout Update',\n\t\t\t\t\t\tvalue: 'checkouts/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Collection Created',\n\t\t\t\t\t\tvalue: 'collections/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Collection Deleted',\n\t\t\t\t\t\tvalue: 'collections/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Collection Listings Added',\n\t\t\t\t\t\tvalue: 'collection_listings/add',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Collection Listings Removed',\n\t\t\t\t\t\tvalue: 'collection_listings/remove',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Collection Listings Updated',\n\t\t\t\t\t\tvalue: 'collection_listings/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Collection Updated',\n\t\t\t\t\t\tvalue: 'collections/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Created',\n\t\t\t\t\t\tvalue: 'customers/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Deleted',\n\t\t\t\t\t\tvalue: 'customers/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Disabled',\n\t\t\t\t\t\tvalue: 'customers/disable',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Enabled',\n\t\t\t\t\t\tvalue: 'customers/enable',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Groups Created',\n\t\t\t\t\t\tvalue: 'customer_groups/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Groups Deleted',\n\t\t\t\t\t\tvalue: 'customer_groups/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Groups Updated',\n\t\t\t\t\t\tvalue: 'customer_groups/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Customer Updated',\n\t\t\t\t\t\tvalue: 'customers/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Draft Orders Created',\n\t\t\t\t\t\tvalue: 'draft_orders/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Draft Orders Deleted',\n\t\t\t\t\t\tvalue: 'draft_orders/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Draft Orders Updated',\n\t\t\t\t\t\tvalue: 'draft_orders/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Fulfillment Created',\n\t\t\t\t\t\tvalue: 'fulfillments/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Fulfillment Events Created',\n\t\t\t\t\t\tvalue: 'fulfillment_events/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Fulfillment Events Deleted',\n\t\t\t\t\t\tvalue: 'fulfillment_events/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Fulfillment Updated',\n\t\t\t\t\t\tvalue: 'fulfillments/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Inventory Items Created',\n\t\t\t\t\t\tvalue: 'inventory_items/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Inventory Items Deleted',\n\t\t\t\t\t\tvalue: 'inventory_items/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Inventory Items Updated',\n\t\t\t\t\t\tvalue: 'inventory_items/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Inventory Levels Connected',\n\t\t\t\t\t\tvalue: 'inventory_levels/connect',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Inventory Levels Disconnected',\n\t\t\t\t\t\tvalue: 'inventory_levels/disconnect',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Inventory Levels Updated',\n\t\t\t\t\t\tvalue: 'inventory_levels/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Locale Created',\n\t\t\t\t\t\tvalue: 'locales/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Locale Updated',\n\t\t\t\t\t\tvalue: 'locales/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Location Created',\n\t\t\t\t\t\tvalue: 'locations/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Location Deleted',\n\t\t\t\t\t\tvalue: 'locations/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Location Updated',\n\t\t\t\t\t\tvalue: 'locations/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Order Cancelled',\n\t\t\t\t\t\tvalue: 'orders/cancelled',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Order Created',\n\t\t\t\t\t\tvalue: 'orders/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Order Fulfilled',\n\t\t\t\t\t\tvalue: 'orders/fulfilled',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Order Paid',\n\t\t\t\t\t\tvalue: 'orders/paid',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Order Partially Fulfilled',\n\t\t\t\t\t\tvalue: 'orders/partially_fulfilled',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Order Transactions Created',\n\t\t\t\t\t\tvalue: 'order_transactions/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Order Updated',\n\t\t\t\t\t\tvalue: 'orders/updated',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Orders Deleted',\n\t\t\t\t\t\tvalue: 'orders/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Product Created',\n\t\t\t\t\t\tvalue: 'products/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Product Deleted',\n\t\t\t\t\t\tvalue: 'products/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Product Listings Added',\n\t\t\t\t\t\tvalue: 'product_listings/add',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Product Listings Removed',\n\t\t\t\t\t\tvalue: 'product_listings/remove',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Product Listings Updated',\n\t\t\t\t\t\tvalue: 'product_listings/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Product Updated',\n\t\t\t\t\t\tvalue: 'products/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Refund Created',\n\t\t\t\t\t\tvalue: 'refunds/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Shop Updated',\n\t\t\t\t\t\tvalue: 'shop/update',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Tender Transactions Created',\n\t\t\t\t\t\tvalue: 'tender_transactions/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Theme Created',\n\t\t\t\t\t\tvalue: 'themes/create',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Theme Deleted',\n\t\t\t\t\t\tvalue: 'themes/delete',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Theme Published',\n\t\t\t\t\t\tvalue: 'themes/publish',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Theme Updated',\n\t\t\t\t\t\tvalue: 'themes/update',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t};\n\n\twebhookMethods = {\n\t\tdefault: {\n\t\t\tasync checkExists(this: IHookFunctions): Promise<boolean> {\n\t\t\t\tconst topic = this.getNodeParameter('topic') as string;\n\t\t\t\tconst webhookData = this.getWorkflowStaticData('node');\n\t\t\t\tconst webhookUrl = this.getNodeWebhookUrl('default');\n\t\t\t\tconst endpoint = '/webhooks';\n\n\t\t\t\tconst { webhooks } = await shopifyApiRequest.call(this, 'GET', endpoint, {}, { topic });\n\t\t\t\tfor (const webhook of webhooks) {\n\t\t\t\t\tif (webhook.address === webhookUrl) {\n\t\t\t\t\t\twebhookData.webhookId = webhook.id;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tasync create(this: IHookFunctions): Promise<boolean> {\n\t\t\t\tconst webhookUrl = this.getNodeWebhookUrl('default');\n\t\t\t\tconst topic = this.getNodeParameter('topic') as string;\n\t\t\t\tconst webhookData = this.getWorkflowStaticData('node');\n\t\t\t\tconst endpoint = '/webhooks.json';\n\t\t\t\tconst body = {\n\t\t\t\t\twebhook: {\n\t\t\t\t\t\ttopic,\n\t\t\t\t\t\taddress: webhookUrl,\n\t\t\t\t\t\tformat: 'json',\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst responseData = await shopifyApiRequest.call(this, 'POST', endpoint, body);\n\n\t\t\t\tif (responseData.webhook === undefined || responseData.webhook.id === undefined) {\n\t\t\t\t\t// Required data is missing so was not successful\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\twebhookData.webhookId = responseData.webhook.id as string;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tasync delete(this: IHookFunctions): Promise<boolean> {\n\t\t\t\tconst webhookData = this.getWorkflowStaticData('node');\n\t\t\t\tif (webhookData.webhookId !== undefined) {\n\t\t\t\t\tconst endpoint = `/webhooks/${webhookData.webhookId}.json`;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait shopifyApiRequest.call(this, 'DELETE', endpoint, {});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tdelete webhookData.webhookId;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t},\n\t};\n\n\tasync webhook(this: IWebhookFunctions): Promise<IWebhookResponseData> {\n\t\tconst headerData = this.getHeaderData() as IDataObject;\n\t\tconst req = this.getRequestObject();\n\t\tconst authentication = this.getNodeParameter('authentication') as string;\n\t\tlet secret = '';\n\n\t\tif (authentication === 'apiKey') {\n\t\t\tconst credentials = await this.getCredentials('shopifyApi');\n\t\t\tsecret = credentials.sharedSecret as string;\n\t\t}\n\n\t\tif (authentication === 'accessToken') {\n\t\t\tconst credentials = await this.getCredentials('shopifyAccessTokenApi');\n\t\t\tsecret = credentials.appSecretKey as string;\n\t\t}\n\n\t\tif (authentication === 'oAuth2') {\n\t\t\tconst credentials = await this.getCredentials('shopifyOAuth2Api');\n\t\t\tsecret = credentials.clientSecret as string;\n\t\t}\n\n\t\tconst topic = this.getNodeParameter('topic') as string;\n\t\tif (\n\t\t\theaderData['x-shopify-topic'] !== undefined &&\n\t\t\theaderData['x-shopify-hmac-sha256'] !== undefined &&\n\t\t\theaderData['x-shopify-shop-domain'] !== undefined &&\n\t\t\theaderData['x-shopify-api-version'] !== undefined\n\t\t) {\n\t\t\tconst computedSignature = createHmac('sha256', secret).update(req.rawBody).digest('base64');\n\n\t\t\tif (headerData['x-shopify-hmac-sha256'] !== computedSignature) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tif (topic !== headerData['x-shopify-topic']) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t\treturn {\n\t\t\tworkflowData: [this.helpers.returnJsonArray(req.body as IDataObject)],\n\t\t};\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA2B;AAC3B,0BAQO;AAEP,8BAAkC;AAE3B,MAAM,eAAoC;AAAA,EAA1C;AACN,uBAAoC;AAAA,MACnC,aAAa;AAAA,MACb,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO,CAAC,SAAS;AAAA,MACjB,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,MACb,UAAU;AAAA,QACT,MAAM;AAAA,MACP;AAAA,MACA,QAAQ,CAAC;AAAA,MACT,SAAS,CAAC,wCAAoB,IAAI;AAAA,MAClC,aAAa;AAAA,QACZ;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,gBAAgB;AAAA,YACf,MAAM;AAAA,cACL,gBAAgB,CAAC,QAAQ;AAAA,YAC1B;AAAA,UACD;AAAA,QACD;AAAA,QACA;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,gBAAgB;AAAA,YACf,MAAM;AAAA,cACL,gBAAgB,CAAC,aAAa;AAAA,YAC/B;AAAA,UACD;AAAA,QACD;AAAA,QACA;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,gBAAgB;AAAA,YACf,MAAM;AAAA,cACL,gBAAgB,CAAC,QAAQ;AAAA,YAC1B;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,MACA,UAAU;AAAA,QACT;AAAA,UACC,MAAM;AAAA,UACN,YAAY;AAAA,UACZ,cAAc;AAAA,UACd,MAAM;AAAA,QACP;AAAA,MACD;AAAA,MACA,YAAY;AAAA,QACX;AAAA,UACC,aAAa;AAAA,UACb,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,YACR;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,UACD;AAAA,UACA,SAAS;AAAA,QACV;AAAA,QACA;AAAA,UACC,aAAa;AAAA,UACb,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,UACT,SAAS;AAAA,YACR;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,YACA;AAAA,cACC,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAEA,0BAAiB;AAAA,MAChB,SAAS;AAAA,QACR,MAAM,cAAoD;AACzD,gBAAM,QAAQ,KAAK,iBAAiB,OAAO;AAC3C,gBAAM,cAAc,KAAK,sBAAsB,MAAM;AACrD,gBAAM,aAAa,KAAK,kBAAkB,SAAS;AACnD,gBAAM,WAAW;AAEjB,gBAAM,EAAE,SAAS,IAAI,MAAM,0CAAkB,KAAK,MAAM,OAAO,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC;AACtF,qBAAW,WAAW,UAAU;AAC/B,gBAAI,QAAQ,YAAY,YAAY;AACnC,0BAAY,YAAY,QAAQ;AAChC,qBAAO;AAAA,YACR;AAAA,UACD;AACA,iBAAO;AAAA,QACR;AAAA,QACA,MAAM,SAA+C;AACpD,gBAAM,aAAa,KAAK,kBAAkB,SAAS;AACnD,gBAAM,QAAQ,KAAK,iBAAiB,OAAO;AAC3C,gBAAM,cAAc,KAAK,sBAAsB,MAAM;AACrD,gBAAM,WAAW;AACjB,gBAAM,OAAO;AAAA,YACZ,SAAS;AAAA,cACR;AAAA,cACA,SAAS;AAAA,cACT,QAAQ;AAAA,YACT;AAAA,UACD;AAEA,gBAAM,eAAe,MAAM,0CAAkB,KAAK,MAAM,QAAQ,UAAU,IAAI;AAE9E,cAAI,aAAa,YAAY,UAAa,aAAa,QAAQ,OAAO,QAAW;AAEhF,mBAAO;AAAA,UACR;AAEA,sBAAY,YAAY,aAAa,QAAQ;AAC7C,iBAAO;AAAA,QACR;AAAA,QACA,MAAM,SAA+C;AACpD,gBAAM,cAAc,KAAK,sBAAsB,MAAM;AACrD,cAAI,YAAY,cAAc,QAAW;AACxC,kBAAM,WAAW,aAAa,YAAY,SAAS;AACnD,gBAAI;AACH,oBAAM,0CAAkB,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC;AAAA,YAC1D,SAAS,OAAO;AACf,qBAAO;AAAA,YACR;AACA,mBAAO,YAAY;AAAA,UACpB;AACA,iBAAO;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAAA;AAAA,EAEA,MAAM,UAAgE;AACrE,UAAM,aAAa,KAAK,cAAc;AACtC,UAAM,MAAM,KAAK,iBAAiB;AAClC,UAAM,iBAAiB,KAAK,iBAAiB,gBAAgB;AAC7D,QAAI,SAAS;AAEb,QAAI,mBAAmB,UAAU;AAChC,YAAM,cAAc,MAAM,KAAK,eAAe,YAAY;AAC1D,eAAS,YAAY;AAAA,IACtB;AAEA,QAAI,mBAAmB,eAAe;AACrC,YAAM,cAAc,MAAM,KAAK,eAAe,uBAAuB;AACrE,eAAS,YAAY;AAAA,IACtB;AAEA,QAAI,mBAAmB,UAAU;AAChC,YAAM,cAAc,MAAM,KAAK,eAAe,kBAAkB;AAChE,eAAS,YAAY;AAAA,IACtB;AAEA,UAAM,QAAQ,KAAK,iBAAiB,OAAO;AAC3C,QACC,WAAW,iBAAiB,MAAM,UAClC,WAAW,uBAAuB,MAAM,UACxC,WAAW,uBAAuB,MAAM,UACxC,WAAW,uBAAuB,MAAM,QACvC;AACD,YAAM,wBAAoB,0BAAW,UAAU,MAAM,EAAE,OAAO,IAAI,OAAO,EAAE,OAAO,QAAQ;AAE1F,UAAI,WAAW,uBAAuB,MAAM,mBAAmB;AAC9D,eAAO,CAAC;AAAA,MACT;AACA,UAAI,UAAU,WAAW,iBAAiB,GAAG;AAC5C,eAAO,CAAC;AAAA,MACT;AAAA,IACD,OAAO;AACN,aAAO,CAAC;AAAA,IACT;AACA,WAAO;AAAA,MACN,cAAc,CAAC,KAAK,QAAQ,gBAAgB,IAAI,IAAmB,CAAC;AAAA,IACrE;AAAA,EACD;AACD;","names":[]}