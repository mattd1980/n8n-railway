{"version":3,"sources":["../../../../../nodes/Airtop/actions/session/save.operation.ts"],"sourcesContent":["import {\n\ttype IDataObject,\n\ttype IExecuteFunctions,\n\ttype INodeExecutionData,\n\ttype INodeProperties,\n} from 'n8n-workflow';\n\nimport {\n\tvalidateAirtopApiResponse,\n\tvalidateProfileName,\n\tvalidateRequiredStringField,\n\tvalidateSessionId,\n} from '../../GenericFunctions';\nimport { apiRequest } from '../../transport';\nimport { sessionIdField, profileNameField } from '../common/fields';\n\nexport const description: INodeProperties[] = [\n\t{\n\t\tdisplayName:\n\t\t\t\"Note: This operation is not needed if you enabled 'Save Profile' in the 'Create Session' operation\",\n\t\tname: 'notice',\n\t\ttype: 'notice',\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['session'],\n\t\t\t\toperation: ['save'],\n\t\t\t},\n\t\t},\n\t\tdefault: 'This operation will save the profile on session termination',\n\t},\n\t{\n\t\t...sessionIdField,\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['session'],\n\t\t\t\toperation: ['save'],\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\t...profileNameField,\n\t\trequired: true,\n\t\tdescription:\n\t\t\t'The name of the <a href=\"https://docs.airtop.ai/guides/how-to/saving-a-profile\" target=\"_blank\">Profile</a> to save',\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['session'],\n\t\t\t\toperation: ['save'],\n\t\t\t},\n\t\t},\n\t\thint: 'Name of the profile you want to save. Must consist only of alphanumeric characters and hyphens \"-\"',\n\t},\n];\n\nexport async function execute(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst sessionId = validateSessionId.call(this, index);\n\tlet profileName = validateRequiredStringField.call(this, index, 'profileName', 'Profile Name');\n\tprofileName = validateProfileName.call(this, index);\n\n\tconst response = await apiRequest.call(\n\t\tthis,\n\t\t'PUT',\n\t\t`/sessions/${sessionId}/save-profile-on-termination/${profileName}`,\n\t);\n\n\t// validate response\n\tvalidateAirtopApiResponse(this.getNode(), response);\n\n\treturn this.helpers.returnJsonArray({ sessionId, profileName, ...response } as IDataObject);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,8BAKO;AACP,uBAA2B;AAC3B,oBAAiD;AAE1C,MAAM,cAAiC;AAAA,EAC7C;AAAA,IACC,aACC;AAAA,IACD,MAAM;AAAA,IACN,MAAM;AAAA,IACN,gBAAgB;AAAA,MACf,MAAM;AAAA,QACL,UAAU,CAAC,SAAS;AAAA,QACpB,WAAW,CAAC,MAAM;AAAA,MACnB;AAAA,IACD;AAAA,IACA,SAAS;AAAA,EACV;AAAA,EACA;AAAA,IACC,GAAG;AAAA,IACH,gBAAgB;AAAA,MACf,MAAM;AAAA,QACL,UAAU,CAAC,SAAS;AAAA,QACpB,WAAW,CAAC,MAAM;AAAA,MACnB;AAAA,IACD;AAAA,EACD;AAAA,EACA;AAAA,IACC,GAAG;AAAA,IACH,UAAU;AAAA,IACV,aACC;AAAA,IACD,gBAAgB;AAAA,MACf,MAAM;AAAA,QACL,UAAU,CAAC,SAAS;AAAA,QACpB,WAAW,CAAC,MAAM;AAAA,MACnB;AAAA,IACD;AAAA,IACA,MAAM;AAAA,EACP;AACD;AAEA,eAAsB,QAErB,OACgC;AAChC,QAAM,YAAY,0CAAkB,KAAK,MAAM,KAAK;AACpD,MAAI,cAAc,oDAA4B,KAAK,MAAM,OAAO,eAAe,cAAc;AAC7F,gBAAc,4CAAoB,KAAK,MAAM,KAAK;AAElD,QAAM,WAAW,MAAM,4BAAW;AAAA,IACjC;AAAA,IACA;AAAA,IACA,aAAa,SAAS,gCAAgC,WAAW;AAAA,EAClE;AAGA,yDAA0B,KAAK,QAAQ,GAAG,QAAQ;AAElD,SAAO,KAAK,QAAQ,gBAAgB,EAAE,WAAW,aAAa,GAAG,SAAS,CAAgB;AAC3F;","names":[]}