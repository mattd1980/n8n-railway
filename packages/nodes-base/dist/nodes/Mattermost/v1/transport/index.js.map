{"version":3,"sources":["../../../../../nodes/Mattermost/v1/transport/index.ts"],"sourcesContent":["import type {\n\tIExecuteFunctions,\n\tIHookFunctions,\n\tILoadOptionsFunctions,\n\tGenericValue,\n\tIDataObject,\n\tIHttpRequestMethods,\n\tIHttpRequestOptions,\n} from 'n8n-workflow';\n\n/**\n * Make an API request to Mattermost\n */\nexport async function apiRequest(\n\tthis: IHookFunctions | IExecuteFunctions | ILoadOptionsFunctions,\n\tmethod: IHttpRequestMethods,\n\tendpoint: string,\n\tbody: IDataObject | GenericValue | GenericValue[] = {},\n\tquery: IDataObject = {},\n) {\n\tconst credentials = await this.getCredentials('mattermostApi');\n\tconst baseUrl = (credentials.baseUrl as string).replace(/\\/$/, '');\n\n\tconst options: IHttpRequestOptions = {\n\t\tmethod,\n\t\tbody,\n\t\tqs: query,\n\t\turl: `${baseUrl}/api/v4/${endpoint}`,\n\t\theaders: {\n\t\t\t'content-type': 'application/json; charset=utf-8',\n\t\t},\n\t\tskipSslCertificateValidation: credentials.allowUnauthorizedCerts as boolean,\n\t};\n\n\treturn await this.helpers.httpRequestWithAuthentication.call(this, 'mattermostApi', options);\n}\n\nexport async function apiRequestAllItems(\n\tthis: IExecuteFunctions | ILoadOptionsFunctions,\n\tmethod: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'HEAD',\n\tendpoint: string,\n\tbody: IDataObject = {},\n\tquery: IDataObject = {},\n) {\n\tconst returnData: IDataObject[] = [];\n\n\tlet responseData;\n\tquery.page = 0;\n\tquery.per_page = 100;\n\n\tdo {\n\t\tresponseData = await apiRequest.call(this, method, endpoint, body, query);\n\t\tquery.page++;\n\t\treturnData.push.apply(returnData, responseData as IDataObject[]);\n\t} while (responseData.length !== 0);\n\n\treturn returnData;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA,eAAsB,WAErB,QACA,UACA,OAAoD,CAAC,GACrD,QAAqB,CAAC,GACrB;AACD,QAAM,cAAc,MAAM,KAAK,eAAe,eAAe;AAC7D,QAAM,UAAW,YAAY,QAAmB,QAAQ,OAAO,EAAE;AAEjE,QAAM,UAA+B;AAAA,IACpC;AAAA,IACA;AAAA,IACA,IAAI;AAAA,IACJ,KAAK,GAAG,OAAO,WAAW,QAAQ;AAAA,IAClC,SAAS;AAAA,MACR,gBAAgB;AAAA,IACjB;AAAA,IACA,8BAA8B,YAAY;AAAA,EAC3C;AAEA,SAAO,MAAM,KAAK,QAAQ,8BAA8B,KAAK,MAAM,iBAAiB,OAAO;AAC5F;AAEA,eAAsB,mBAErB,QACA,UACA,OAAoB,CAAC,GACrB,QAAqB,CAAC,GACrB;AACD,QAAM,aAA4B,CAAC;AAEnC,MAAI;AACJ,QAAM,OAAO;AACb,QAAM,WAAW;AAEjB,KAAG;AACF,mBAAe,MAAM,WAAW,KAAK,MAAM,QAAQ,UAAU,MAAM,KAAK;AACxE,UAAM;AACN,eAAW,KAAK,MAAM,YAAY,YAA6B;AAAA,EAChE,SAAS,aAAa,WAAW;AAEjC,SAAO;AACR;","names":[]}