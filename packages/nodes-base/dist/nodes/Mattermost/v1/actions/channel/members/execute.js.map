{"version":3,"sources":["../../../../../../../nodes/Mattermost/v1/actions/channel/members/execute.ts"],"sourcesContent":["import type { IExecuteFunctions, IDataObject, INodeExecutionData } from 'n8n-workflow';\n\nimport { apiRequest, apiRequestAllItems } from '../../../transport';\n\nexport async function members(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst channelId = this.getNodeParameter('channelId', index) as string;\n\tconst returnAll = this.getNodeParameter('returnAll', index);\n\tconst resolveData = this.getNodeParameter('resolveData', index);\n\tconst limit = this.getNodeParameter('limit', index, 0);\n\n\tconst body = {} as IDataObject;\n\tconst qs = {} as IDataObject;\n\tconst requestMethod = 'GET';\n\tconst endpoint = `channels/${channelId}/members`;\n\n\tif (!returnAll) {\n\t\tqs.per_page = this.getNodeParameter('limit', index);\n\t}\n\n\tlet responseData;\n\n\tif (returnAll) {\n\t\tresponseData = await apiRequestAllItems.call(this, requestMethod, endpoint, body, qs);\n\t} else {\n\t\tresponseData = await apiRequest.call(this, requestMethod, endpoint, body, qs);\n\t\tif (limit) {\n\t\t\tresponseData = responseData.slice(0, limit);\n\t\t}\n\t\tif (resolveData) {\n\t\t\tconst userIds: string[] = [];\n\t\t\tfor (const data of responseData) {\n\t\t\t\tuserIds.push(data.user_id as string);\n\t\t\t}\n\t\t\tif (userIds.length > 0) {\n\t\t\t\tresponseData = await apiRequest.call(this, 'POST', 'users/ids', userIds, qs);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this.helpers.returnJsonArray(responseData as IDataObject[]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,uBAA+C;AAE/C,eAAsB,QAErB,OACgC;AAChC,QAAM,YAAY,KAAK,iBAAiB,aAAa,KAAK;AAC1D,QAAM,YAAY,KAAK,iBAAiB,aAAa,KAAK;AAC1D,QAAM,cAAc,KAAK,iBAAiB,eAAe,KAAK;AAC9D,QAAM,QAAQ,KAAK,iBAAiB,SAAS,OAAO,CAAC;AAErD,QAAM,OAAO,CAAC;AACd,QAAM,KAAK,CAAC;AACZ,QAAM,gBAAgB;AACtB,QAAM,WAAW,YAAY,SAAS;AAEtC,MAAI,CAAC,WAAW;AACf,OAAG,WAAW,KAAK,iBAAiB,SAAS,KAAK;AAAA,EACnD;AAEA,MAAI;AAEJ,MAAI,WAAW;AACd,mBAAe,MAAM,oCAAmB,KAAK,MAAM,eAAe,UAAU,MAAM,EAAE;AAAA,EACrF,OAAO;AACN,mBAAe,MAAM,4BAAW,KAAK,MAAM,eAAe,UAAU,MAAM,EAAE;AAC5E,QAAI,OAAO;AACV,qBAAe,aAAa,MAAM,GAAG,KAAK;AAAA,IAC3C;AACA,QAAI,aAAa;AAChB,YAAM,UAAoB,CAAC;AAC3B,iBAAW,QAAQ,cAAc;AAChC,gBAAQ,KAAK,KAAK,OAAiB;AAAA,MACpC;AACA,UAAI,QAAQ,SAAS,GAAG;AACvB,uBAAe,MAAM,4BAAW,KAAK,MAAM,QAAQ,aAAa,SAAS,EAAE;AAAA,MAC5E;AAAA,IACD;AAAA,EACD;AAEA,SAAO,KAAK,QAAQ,gBAAgB,YAA6B;AAClE;","names":[]}