{"version":3,"sources":["../../../../../nodes/Mattermost/v1/actions/router.ts"],"sourcesContent":["import type { IExecuteFunctions, IDataObject, INodeExecutionData } from 'n8n-workflow';\n\nimport * as channel from './channel';\nimport type { Mattermost } from './Interfaces';\nimport * as message from './message';\nimport * as reaction from './reaction';\nimport * as user from './user';\n\nexport async function router(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n\tconst items = this.getInputData();\n\tconst operationResult: INodeExecutionData[] = [];\n\tlet responseData: IDataObject | IDataObject[] = [];\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst resource = this.getNodeParameter<Mattermost>('resource', i);\n\t\tlet operation = this.getNodeParameter('operation', i);\n\t\tif (operation === 'del') {\n\t\t\toperation = 'delete';\n\t\t} else if (operation === 'desactive') {\n\t\t\toperation = 'deactive';\n\t\t}\n\n\t\tconst mattermost = {\n\t\t\tresource,\n\t\t\toperation,\n\t\t} as Mattermost;\n\n\t\ttry {\n\t\t\tif (mattermost.resource === 'channel') {\n\t\t\t\tresponseData = await channel[mattermost.operation].execute.call(this, i);\n\t\t\t} else if (mattermost.resource === 'message') {\n\t\t\t\tresponseData = await message[mattermost.operation].execute.call(this, i);\n\t\t\t} else if (mattermost.resource === 'reaction') {\n\t\t\t\tresponseData = await reaction[mattermost.operation].execute.call(this, i);\n\t\t\t} else if (mattermost.resource === 'user') {\n\t\t\t\tresponseData = await user[mattermost.operation].execute.call(this, i);\n\t\t\t}\n\n\t\t\tconst executionData = this.helpers.constructExecutionMetaData(\n\t\t\t\tthis.helpers.returnJsonArray(responseData),\n\t\t\t\t{ itemData: { item: i } },\n\t\t\t);\n\t\t\toperationResult.push(...executionData);\n\t\t} catch (err) {\n\t\t\tif (this.continueOnFail()) {\n\t\t\t\toperationResult.push({ json: this.getInputData(i)[0].json, error: err });\n\t\t\t} else {\n\t\t\t\tif (err.context) err.context.itemIndex = i;\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [operationResult];\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,cAAyB;AAEzB,cAAyB;AACzB,eAA0B;AAC1B,WAAsB;AAEtB,eAAsB,SAAiE;AACtF,QAAM,QAAQ,KAAK,aAAa;AAChC,QAAM,kBAAwC,CAAC;AAC/C,MAAI,eAA4C,CAAC;AAEjD,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,UAAM,WAAW,KAAK,iBAA6B,YAAY,CAAC;AAChE,QAAI,YAAY,KAAK,iBAAiB,aAAa,CAAC;AACpD,QAAI,cAAc,OAAO;AACxB,kBAAY;AAAA,IACb,WAAW,cAAc,aAAa;AACrC,kBAAY;AAAA,IACb;AAEA,UAAM,aAAa;AAAA,MAClB;AAAA,MACA;AAAA,IACD;AAEA,QAAI;AACH,UAAI,WAAW,aAAa,WAAW;AACtC,uBAAe,MAAM,QAAQ,WAAW,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC;AAAA,MACxE,WAAW,WAAW,aAAa,WAAW;AAC7C,uBAAe,MAAM,QAAQ,WAAW,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC;AAAA,MACxE,WAAW,WAAW,aAAa,YAAY;AAC9C,uBAAe,MAAM,SAAS,WAAW,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC;AAAA,MACzE,WAAW,WAAW,aAAa,QAAQ;AAC1C,uBAAe,MAAM,KAAK,WAAW,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC;AAAA,MACrE;AAEA,YAAM,gBAAgB,KAAK,QAAQ;AAAA,QAClC,KAAK,QAAQ,gBAAgB,YAAY;AAAA,QACzC,EAAE,UAAU,EAAE,MAAM,EAAE,EAAE;AAAA,MACzB;AACA,sBAAgB,KAAK,GAAG,aAAa;AAAA,IACtC,SAAS,KAAK;AACb,UAAI,KAAK,eAAe,GAAG;AAC1B,wBAAgB,KAAK,EAAE,MAAM,KAAK,aAAa,CAAC,EAAE,CAAC,EAAE,MAAM,OAAO,IAAI,CAAC;AAAA,MACxE,OAAO;AACN,YAAI,IAAI,QAAS,KAAI,QAAQ,YAAY;AACzC,cAAM;AAAA,MACP;AAAA,IACD;AAAA,EACD;AAEA,SAAO,CAAC,eAAe;AACxB;","names":[]}