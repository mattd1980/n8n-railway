{"version":3,"sources":["../../../../../nodes/MySql/v2/actions/router.ts"],"sourcesContent":["import type { IExecuteFunctions, INodeExecutionData } from 'n8n-workflow';\nimport { NodeOperationError } from 'n8n-workflow';\n\nimport * as database from './database/Database.resource';\nimport type { MySqlType } from './node.type';\nimport type { MysqlNodeCredentials, QueryRunner } from '../helpers/interfaces';\nimport { configureQueryRunner } from '../helpers/utils';\nimport { createPool } from '../transport';\n\nexport async function router(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n\tlet returnData: INodeExecutionData[] = [];\n\n\tconst resource = this.getNodeParameter<MySqlType>('resource', 0);\n\tconst operation = this.getNodeParameter('operation', 0);\n\tconst nodeOptions = this.getNodeParameter('options', 0);\n\n\tnodeOptions.nodeVersion = this.getNode().typeVersion;\n\n\tconst credentials = await this.getCredentials<MysqlNodeCredentials>('mySql');\n\n\tconst pool = await createPool.call(this, credentials, nodeOptions);\n\n\tconst runQueries: QueryRunner = configureQueryRunner.call(this, nodeOptions, pool);\n\n\tconst mysqlNodeData = {\n\t\tresource,\n\t\toperation,\n\t} as MySqlType;\n\n\ttry {\n\t\tswitch (mysqlNodeData.resource) {\n\t\t\tcase 'database':\n\t\t\t\tconst items = this.getInputData();\n\n\t\t\t\treturnData = await database[mysqlNodeData.operation].execute.call(\n\t\t\t\t\tthis,\n\t\t\t\t\titems,\n\t\t\t\t\trunQueries,\n\t\t\t\t\tnodeOptions,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new NodeOperationError(\n\t\t\t\t\tthis.getNode(),\n\t\t\t\t\t`The operation \"${operation}\" is not supported!`,\n\t\t\t\t);\n\t\t}\n\t} finally {\n\t\tawait pool.end();\n\t}\n\n\treturn [returnData];\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,0BAAmC;AAEnC,eAA0B;AAG1B,mBAAqC;AACrC,uBAA2B;AAE3B,eAAsB,SAAiE;AACtF,MAAI,aAAmC,CAAC;AAExC,QAAM,WAAW,KAAK,iBAA4B,YAAY,CAAC;AAC/D,QAAM,YAAY,KAAK,iBAAiB,aAAa,CAAC;AACtD,QAAM,cAAc,KAAK,iBAAiB,WAAW,CAAC;AAEtD,cAAY,cAAc,KAAK,QAAQ,EAAE;AAEzC,QAAM,cAAc,MAAM,KAAK,eAAqC,OAAO;AAE3E,QAAM,OAAO,MAAM,4BAAW,KAAK,MAAM,aAAa,WAAW;AAEjE,QAAM,aAA0B,kCAAqB,KAAK,MAAM,aAAa,IAAI;AAEjF,QAAM,gBAAgB;AAAA,IACrB;AAAA,IACA;AAAA,EACD;AAEA,MAAI;AACH,YAAQ,cAAc,UAAU;AAAA,MAC/B,KAAK;AACJ,cAAM,QAAQ,KAAK,aAAa;AAEhC,qBAAa,MAAM,SAAS,cAAc,SAAS,EAAE,QAAQ;AAAA,UAC5D;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AACA;AAAA,MACD;AACC,cAAM,IAAI;AAAA,UACT,KAAK,QAAQ;AAAA,UACb,kBAAkB,SAAS;AAAA,QAC5B;AAAA,IACF;AAAA,EACD,UAAE;AACD,UAAM,KAAK,IAAI;AAAA,EAChB;AAEA,SAAO,CAAC,UAAU;AACnB;","names":[]}