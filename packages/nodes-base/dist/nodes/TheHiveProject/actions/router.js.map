{"version":3,"sources":["../../../../nodes/TheHiveProject/actions/router.ts"],"sourcesContent":["import type { IExecuteFunctions, INodeExecutionData } from 'n8n-workflow';\nimport { NodeOperationError } from 'n8n-workflow';\n\nimport * as alert from './alert';\nimport * as case_ from './case';\nimport * as comment from './comment';\nimport * as log from './log';\nimport type { TheHiveType } from './node.type';\nimport * as observable from './observable';\nimport * as page from './page';\nimport * as query from './query';\nimport * as task from './task';\n\nexport async function router(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n\tconst items = this.getInputData();\n\tconst returnData: INodeExecutionData[] = [];\n\tconst length = items.length;\n\n\tconst resource = this.getNodeParameter<TheHiveType>('resource', 0);\n\tconst operation = this.getNodeParameter('operation', 0);\n\n\tlet executionData: INodeExecutionData[] = [];\n\n\tconst theHiveNodeData = {\n\t\tresource,\n\t\toperation,\n\t} as TheHiveType;\n\n\tfor (let i = 0; i < length; i++) {\n\t\ttry {\n\t\t\tswitch (theHiveNodeData.resource) {\n\t\t\t\tcase 'alert':\n\t\t\t\t\texecutionData = await alert[theHiveNodeData.operation].execute.call(this, i, items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'case':\n\t\t\t\t\texecutionData = await case_[theHiveNodeData.operation].execute.call(this, i, items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'comment':\n\t\t\t\t\texecutionData = await comment[theHiveNodeData.operation].execute.call(this, i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'log':\n\t\t\t\t\texecutionData = await log[theHiveNodeData.operation].execute.call(this, i, items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'observable':\n\t\t\t\t\texecutionData = await observable[theHiveNodeData.operation].execute.call(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\ti,\n\t\t\t\t\t\titems[i],\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'page':\n\t\t\t\t\texecutionData = await page[theHiveNodeData.operation].execute.call(this, i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'query':\n\t\t\t\t\texecutionData = await query[theHiveNodeData.operation].execute.call(this, i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'task':\n\t\t\t\t\texecutionData = await task[theHiveNodeData.operation].execute.call(this, i, items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new NodeOperationError(\n\t\t\t\t\t\tthis.getNode(),\n\t\t\t\t\t\t`The operation \"${operation}\" is not supported!`,\n\t\t\t\t\t);\n\t\t\t}\n\t\t\treturnData.push(...executionData);\n\t\t} catch (error) {\n\t\t\tif (this.continueOnFail()) {\n\t\t\t\texecutionData = this.helpers.constructExecutionMetaData(\n\t\t\t\t\tthis.helpers.returnJsonArray({ error: error.message }),\n\t\t\t\t\t{ itemData: { item: i } },\n\t\t\t\t);\n\t\t\t\treturnData.push(...executionData);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthrow error;\n\t\t}\n\t}\n\treturn [returnData];\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,0BAAmC;AAEnC,YAAuB;AACvB,YAAuB;AACvB,cAAyB;AACzB,UAAqB;AAErB,iBAA4B;AAC5B,WAAsB;AACtB,YAAuB;AACvB,WAAsB;AAEtB,eAAsB,SAAiE;AACtF,QAAM,QAAQ,KAAK,aAAa;AAChC,QAAM,aAAmC,CAAC;AAC1C,QAAM,SAAS,MAAM;AAErB,QAAM,WAAW,KAAK,iBAA8B,YAAY,CAAC;AACjE,QAAM,YAAY,KAAK,iBAAiB,aAAa,CAAC;AAEtD,MAAI,gBAAsC,CAAC;AAE3C,QAAM,kBAAkB;AAAA,IACvB;AAAA,IACA;AAAA,EACD;AAEA,WAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAChC,QAAI;AACH,cAAQ,gBAAgB,UAAU;AAAA,QACjC,KAAK;AACJ,0BAAgB,MAAM,MAAM,gBAAgB,SAAS,EAAE,QAAQ,KAAK,MAAM,GAAG,MAAM,CAAC,CAAC;AACrF;AAAA,QACD,KAAK;AACJ,0BAAgB,MAAM,MAAM,gBAAgB,SAAS,EAAE,QAAQ,KAAK,MAAM,GAAG,MAAM,CAAC,CAAC;AACrF;AAAA,QACD,KAAK;AACJ,0BAAgB,MAAM,QAAQ,gBAAgB,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC;AAC7E;AAAA,QACD,KAAK;AACJ,0BAAgB,MAAM,IAAI,gBAAgB,SAAS,EAAE,QAAQ,KAAK,MAAM,GAAG,MAAM,CAAC,CAAC;AACnF;AAAA,QACD,KAAK;AACJ,0BAAgB,MAAM,WAAW,gBAAgB,SAAS,EAAE,QAAQ;AAAA,YACnE;AAAA,YACA;AAAA,YACA,MAAM,CAAC;AAAA,UACR;AACA;AAAA,QACD,KAAK;AACJ,0BAAgB,MAAM,KAAK,gBAAgB,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC;AAC1E;AAAA,QACD,KAAK;AACJ,0BAAgB,MAAM,MAAM,gBAAgB,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC;AAC3E;AAAA,QACD,KAAK;AACJ,0BAAgB,MAAM,KAAK,gBAAgB,SAAS,EAAE,QAAQ,KAAK,MAAM,GAAG,MAAM,CAAC,CAAC;AACpF;AAAA,QACD;AACC,gBAAM,IAAI;AAAA,YACT,KAAK,QAAQ;AAAA,YACb,kBAAkB,SAAS;AAAA,UAC5B;AAAA,MACF;AACA,iBAAW,KAAK,GAAG,aAAa;AAAA,IACjC,SAAS,OAAO;AACf,UAAI,KAAK,eAAe,GAAG;AAC1B,wBAAgB,KAAK,QAAQ;AAAA,UAC5B,KAAK,QAAQ,gBAAgB,EAAE,OAAO,MAAM,QAAQ,CAAC;AAAA,UACrD,EAAE,UAAU,EAAE,MAAM,EAAE,EAAE;AAAA,QACzB;AACA,mBAAW,KAAK,GAAG,aAAa;AAChC;AAAA,MACD;AACA,YAAM;AAAA,IACP;AAAA,EACD;AACA,SAAO,CAAC,UAAU;AACnB;","names":[]}