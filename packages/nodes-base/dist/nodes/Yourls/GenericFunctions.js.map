{"version":3,"sources":["../../../nodes/Yourls/GenericFunctions.ts"],"sourcesContent":["import type {\n\tIExecuteFunctions,\n\tILoadOptionsFunctions,\n\tIDataObject,\n\tJsonObject,\n\tIHttpRequestMethods,\n\tIRequestOptions,\n} from 'n8n-workflow';\nimport { NodeApiError, NodeOperationError } from 'n8n-workflow';\n\nexport async function yourlsApiRequest(\n\tthis: IExecuteFunctions | ILoadOptionsFunctions,\n\tmethod: IHttpRequestMethods,\n\n\tbody: any = {},\n\tqs: IDataObject = {},\n): Promise<any> {\n\tconst credentials = await this.getCredentials('yourlsApi');\n\n\tqs.signature = credentials.signature as string;\n\tqs.format = 'json';\n\n\tconst options: IRequestOptions = {\n\t\tmethod,\n\t\tbody,\n\t\tqs,\n\t\turi: `${credentials.url}/yourls-api.php`,\n\t\tjson: true,\n\t};\n\ttry {\n\t\tconst response = await this.helpers.request.call(this, options);\n\n\t\tif (response.status === 'fail') {\n\t\t\tthrow new NodeOperationError(\n\t\t\t\tthis.getNode(),\n\t\t\t\t`Yourls error response [400]: ${response.message}`,\n\t\t\t);\n\t\t}\n\n\t\tif (typeof response === 'string' && response.includes('<b>Fatal error</b>')) {\n\t\t\tthrow new NodeOperationError(\n\t\t\t\tthis.getNode(),\n\t\t\t\t\"Yourls responded with a 'Fatal error', check description for more details\",\n\t\t\t\t{\n\t\t\t\t\tdescription: `Server response:\\n${response}`,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn response;\n\t} catch (error) {\n\t\tthrow new NodeApiError(this.getNode(), error as JsonObject);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,0BAAiD;AAEjD,eAAsB,iBAErB,QAEA,OAAY,CAAC,GACb,KAAkB,CAAC,GACJ;AACf,QAAM,cAAc,MAAM,KAAK,eAAe,WAAW;AAEzD,KAAG,YAAY,YAAY;AAC3B,KAAG,SAAS;AAEZ,QAAM,UAA2B;AAAA,IAChC;AAAA,IACA;AAAA,IACA;AAAA,IACA,KAAK,GAAG,YAAY,GAAG;AAAA,IACvB,MAAM;AAAA,EACP;AACA,MAAI;AACH,UAAM,WAAW,MAAM,KAAK,QAAQ,QAAQ,KAAK,MAAM,OAAO;AAE9D,QAAI,SAAS,WAAW,QAAQ;AAC/B,YAAM,IAAI;AAAA,QACT,KAAK,QAAQ;AAAA,QACb,gCAAgC,SAAS,OAAO;AAAA,MACjD;AAAA,IACD;AAEA,QAAI,OAAO,aAAa,YAAY,SAAS,SAAS,oBAAoB,GAAG;AAC5E,YAAM,IAAI;AAAA,QACT,KAAK,QAAQ;AAAA,QACb;AAAA,QACA;AAAA,UACC,aAAa;AAAA,EAAqB,QAAQ;AAAA,QAC3C;AAAA,MACD;AAAA,IACD;AAEA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,UAAM,IAAI,iCAAa,KAAK,QAAQ,GAAG,KAAmB;AAAA,EAC3D;AACD;","names":[]}