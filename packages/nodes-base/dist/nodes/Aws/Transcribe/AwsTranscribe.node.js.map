{"version":3,"sources":["../../../../nodes/Aws/Transcribe/AwsTranscribe.node.ts"],"sourcesContent":["import type {\n\tIExecuteFunctions,\n\tIDataObject,\n\tINodeExecutionData,\n\tINodeType,\n\tINodeTypeDescription,\n} from 'n8n-workflow';\nimport { NodeConnectionTypes } from 'n8n-workflow';\n\nimport { awsApiRequestREST, awsApiRequestRESTAllItems } from './GenericFunctions';\n\nexport class AwsTranscribe implements INodeType {\n\tdescription: INodeTypeDescription = {\n\t\tdisplayName: 'AWS Transcribe',\n\t\tname: 'awsTranscribe',\n\t\ticon: 'file:transcribe.svg',\n\t\tgroup: ['output'],\n\t\tversion: 1,\n\t\tsubtitle: '={{$parameter[\"operation\"] + \": \" + $parameter[\"resource\"]}}',\n\t\tdescription: 'Sends data to AWS Transcribe',\n\t\tdefaults: {\n\t\t\tname: 'AWS Transcribe',\n\t\t},\n\t\tusableAsTool: true,\n\t\tinputs: [NodeConnectionTypes.Main],\n\t\toutputs: [NodeConnectionTypes.Main],\n\t\tcredentials: [\n\t\t\t{\n\t\t\t\tname: 'aws',\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tdisplayName: 'Resource',\n\t\t\t\tname: 'resource',\n\t\t\t\ttype: 'options',\n\t\t\t\tnoDataExpression: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Transcription Job',\n\t\t\t\t\t\tvalue: 'transcriptionJob',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: 'transcriptionJob',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Operation',\n\t\t\t\tname: 'operation',\n\t\t\t\ttype: 'options',\n\t\t\t\tnoDataExpression: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Create',\n\t\t\t\t\t\tvalue: 'create',\n\t\t\t\t\t\tdescription: 'Create a transcription job',\n\t\t\t\t\t\taction: 'Create a transcription job',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Delete',\n\t\t\t\t\t\tvalue: 'delete',\n\t\t\t\t\t\tdescription: 'Delete a transcription job',\n\t\t\t\t\t\taction: 'Delete a transcription job',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Get',\n\t\t\t\t\t\tvalue: 'get',\n\t\t\t\t\t\tdescription: 'Get a transcription job',\n\t\t\t\t\t\taction: 'Get a transcription job',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Get Many',\n\t\t\t\t\t\tvalue: 'getAll',\n\t\t\t\t\t\tdescription: 'Get many transcription jobs',\n\t\t\t\t\t\taction: 'Get many transcription jobs',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: 'create',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Job Name',\n\t\t\t\tname: 'transcriptionJobName',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['create', 'get', 'delete'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdescription: 'The name of the job',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Media File URI',\n\t\t\t\tname: 'mediaFileUri',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['create'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdescription: 'The S3 object location of the input media file',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Detect Language',\n\t\t\t\tname: 'detectLanguage',\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['create'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: false,\n\t\t\t\tdescription:\n\t\t\t\t\t'Whether to set this field to true to enable automatic language identification',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Language',\n\t\t\t\tname: 'languageCode',\n\t\t\t\ttype: 'options',\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'American English',\n\t\t\t\t\t\tvalue: 'en-US',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'British English',\n\t\t\t\t\t\tvalue: 'en-GB',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'German',\n\t\t\t\t\t\tvalue: 'de-DE',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Indian English',\n\t\t\t\t\t\tvalue: 'en-IN',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Irish English',\n\t\t\t\t\t\tvalue: 'en-IE',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Russian',\n\t\t\t\t\t\tvalue: 'ru-RU',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Spanish',\n\t\t\t\t\t\tvalue: 'es-ES',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['create'],\n\t\t\t\t\t\tdetectLanguage: [false],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: 'en-US',\n\t\t\t\tdescription: 'Language used in the input media file',\n\t\t\t},\n\t\t\t// ----------------------------------\n\t\t\t//     Transcription Job Settings\n\t\t\t// ----------------------------------\n\t\t\t{\n\t\t\t\tdisplayName: 'Options',\n\t\t\t\tname: 'options',\n\t\t\t\ttype: 'collection',\n\t\t\t\tplaceholder: 'Add option',\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\toperation: ['create'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: {},\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Channel Identification',\n\t\t\t\t\t\tname: 'channelIdentification',\n\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\tdefault: false,\n\t\t\t\t\t\t// eslint-disable-next-line n8n-nodes-base/node-param-description-boolean-without-whether\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\"Instructs Amazon Transcribe to process each audiochannel separately and then merge the transcription output of each channel into a single transcription. You can't set both Max Speaker Labels and Channel Identification in the same request. If you set both, your request returns a BadRequestException.\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Max Alternatives',\n\t\t\t\t\t\tname: 'maxAlternatives',\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\tdefault: 2,\n\t\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\t\tminValue: 2,\n\t\t\t\t\t\t\tmaxValue: 10,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdescription: 'The number of alternative transcriptions that the service should return',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Max Speaker Labels',\n\t\t\t\t\t\tname: 'maxSpeakerLabels',\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\tdefault: 2,\n\t\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\t\tminValue: 2,\n\t\t\t\t\t\t\tmaxValue: 10,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t'The maximum number of speakers to identify in the input audio. If there are more speakers in the audio than this number, multiple speakers are identified as a single speaker.',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Vocabulary Name',\n\t\t\t\t\t\tname: 'vocabularyName',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Name of vocabulary to use when processing the transcription job',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Vocabulary Filter Name',\n\t\t\t\t\t\tname: 'vocabularyFilterName',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t'The name of the vocabulary filter to use when transcribing the audio. The filter that you specify must have the same language code as the transcription job.',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Vocabulary Filter Method',\n\t\t\t\t\t\tname: 'vocabularyFilterMethod',\n\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Remove',\n\t\t\t\t\t\t\t\tvalue: 'remove',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Mask',\n\t\t\t\t\t\t\t\tvalue: 'mask',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Tag',\n\t\t\t\t\t\t\t\tvalue: 'tag',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdefault: 'remove',\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t'<p>Set to mask to remove filtered text from the transcript and replace it with three asterisks (\"***\") as placeholder text.</p><p>Set to remove to remove filtered text from the transcript without using placeholder text. Set to tag to mark the word in the transcription output that matches the vocabulary filter. When you set the filter method to tag, the words matching your vocabulary filter are not masked or removed.</p>',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Return Transcript',\n\t\t\t\tname: 'returnTranscript',\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: true,\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['get'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t// eslint-disable-next-line n8n-nodes-base/node-param-description-boolean-without-whether\n\t\t\t\tdescription:\n\t\t\t\t\t'By default, the response only contains metadata about the transcript. Enable this option to retrieve the transcript instead.',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Simplify',\n\t\t\t\tname: 'simple',\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['get'],\n\t\t\t\t\t\treturnTranscript: [true],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: true,\n\t\t\t\tdescription:\n\t\t\t\t\t'Whether to return a simplified version of the response instead of the raw data',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Return All',\n\t\t\t\tname: 'returnAll',\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['getAll'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: false,\n\t\t\t\tdescription: 'Whether to return all results or only up to a given limit',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Limit',\n\t\t\t\tname: 'limit',\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: 20,\n\t\t\t\ttypeOptions: {\n\t\t\t\t\tminValue: 1,\n\t\t\t\t},\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['getAll'],\n\t\t\t\t\t\treturnAll: [false],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdescription: 'Max number of results to return',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Filters',\n\t\t\t\tname: 'filters',\n\t\t\t\ttype: 'collection',\n\t\t\t\tplaceholder: 'Add Filter',\n\t\t\t\tdefault: {},\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['transcriptionJob'],\n\t\t\t\t\t\toperation: ['getAll'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Job Name Contains',\n\t\t\t\t\t\tname: 'jobNameContains',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'Return only transcription jobs whose name contains the specified string',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Status',\n\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Completed',\n\t\t\t\t\t\t\t\tvalue: 'COMPLETED',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Failed',\n\t\t\t\t\t\t\t\tvalue: 'FAILED',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'In Progress',\n\t\t\t\t\t\t\t\tvalue: 'IN_PROGRESS',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Queued',\n\t\t\t\t\t\t\t\tvalue: 'QUEUED',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdescription: 'Return only transcription jobs with the specified status',\n\t\t\t\t\t\tdefault: 'COMPLETED',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t};\n\n\tasync execute(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n\t\tconst items = this.getInputData();\n\t\tconst returnData: IDataObject[] = [];\n\t\tlet responseData;\n\t\tconst resource = this.getNodeParameter('resource', 0);\n\t\tconst operation = this.getNodeParameter('operation', 0);\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\ttry {\n\t\t\t\tif (resource === 'transcriptionJob') {\n\t\t\t\t\t//https://docs.aws.amazon.com/comprehend/latest/dg/API_DetectDominantLanguage.html\n\t\t\t\t\tif (operation === 'create') {\n\t\t\t\t\t\tconst transcriptionJobName = this.getNodeParameter('transcriptionJobName', i) as string;\n\t\t\t\t\t\tconst mediaFileUri = this.getNodeParameter('mediaFileUri', i) as string;\n\t\t\t\t\t\tconst detectLang = this.getNodeParameter('detectLanguage', i) as boolean;\n\n\t\t\t\t\t\tconst options = this.getNodeParameter('options', i, {});\n\n\t\t\t\t\t\tconst body: IDataObject = {\n\t\t\t\t\t\t\tTranscriptionJobName: transcriptionJobName,\n\t\t\t\t\t\t\tMedia: {\n\t\t\t\t\t\t\t\tMediaFileUri: mediaFileUri,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tSettings: {},\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (detectLang) {\n\t\t\t\t\t\t\tbody.IdentifyLanguage = detectLang;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbody.LanguageCode = this.getNodeParameter('languageCode', i) as string;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (body.Settings) {\n\t\t\t\t\t\t\tif (options.channelIdentification) {\n\t\t\t\t\t\t\t\tObject.assign(body.Settings, {\n\t\t\t\t\t\t\t\t\tChannelIdentification: options.channelIdentification,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (options.maxAlternatives) {\n\t\t\t\t\t\t\t\tObject.assign(body.Settings, {\n\t\t\t\t\t\t\t\t\tShowAlternatives: true,\n\t\t\t\t\t\t\t\t\tMaxAlternatives: options.maxAlternatives,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (options.maxSpeakerLabels) {\n\t\t\t\t\t\t\t\tObject.assign(body.Settings, {\n\t\t\t\t\t\t\t\t\tShowSpeakerLabels: true,\n\t\t\t\t\t\t\t\t\tMaxSpeakerLabels: options.maxSpeakerLabels,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (options.vocabularyName) {\n\t\t\t\t\t\t\t\tObject.assign(body.Settings, {\n\t\t\t\t\t\t\t\t\tVocabularyName: options.vocabularyName,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (options.vocabularyFilterName) {\n\t\t\t\t\t\t\t\tObject.assign(body.Settings, {\n\t\t\t\t\t\t\t\t\tVocabularyFilterName: options.vocabularyFilterName,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (options.vocabularyFilterMethod) {\n\t\t\t\t\t\t\t\tObject.assign(body.Settings, {\n\t\t\t\t\t\t\t\t\tVocabularyFilterMethod: options.vocabularyFilterMethod,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst action = 'Transcribe.StartTranscriptionJob';\n\t\t\t\t\t\tresponseData = await awsApiRequestREST.call(\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t'transcribe',\n\t\t\t\t\t\t\t'POST',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\tJSON.stringify(body),\n\t\t\t\t\t\t\t{ 'x-amz-target': action, 'Content-Type': 'application/x-amz-json-1.1' },\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresponseData = responseData.TranscriptionJob;\n\t\t\t\t\t}\n\t\t\t\t\t//https://docs.aws.amazon.com/transcribe/latest/dg/API_DeleteTranscriptionJob.html\n\t\t\t\t\tif (operation === 'delete') {\n\t\t\t\t\t\tconst transcriptionJobName = this.getNodeParameter('transcriptionJobName', i) as string;\n\n\t\t\t\t\t\tconst body: IDataObject = {\n\t\t\t\t\t\t\tTranscriptionJobName: transcriptionJobName,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst action = 'Transcribe.DeleteTranscriptionJob';\n\t\t\t\t\t\tresponseData = await awsApiRequestREST.call(\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t'transcribe',\n\t\t\t\t\t\t\t'POST',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\tJSON.stringify(body),\n\t\t\t\t\t\t\t{ 'x-amz-target': action, 'Content-Type': 'application/x-amz-json-1.1' },\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresponseData = { success: true };\n\t\t\t\t\t}\n\t\t\t\t\t//https://docs.aws.amazon.com/transcribe/latest/dg/API_GetTranscriptionJob.html\n\t\t\t\t\tif (operation === 'get') {\n\t\t\t\t\t\tconst transcriptionJobName = this.getNodeParameter('transcriptionJobName', i) as string;\n\t\t\t\t\t\tconst resolve = this.getNodeParameter('returnTranscript', 0) as boolean;\n\n\t\t\t\t\t\tconst body: IDataObject = {\n\t\t\t\t\t\t\tTranscriptionJobName: transcriptionJobName,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst action = 'Transcribe.GetTranscriptionJob';\n\t\t\t\t\t\tresponseData = await awsApiRequestREST.call(\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t'transcribe',\n\t\t\t\t\t\t\t'POST',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\tJSON.stringify(body),\n\t\t\t\t\t\t\t{ 'x-amz-target': action, 'Content-Type': 'application/x-amz-json-1.1' },\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresponseData = responseData.TranscriptionJob;\n\n\t\t\t\t\t\tif (resolve && responseData.TranscriptionJobStatus === 'COMPLETED') {\n\t\t\t\t\t\t\tresponseData = await this.helpers.request({\n\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\turi: responseData.Transcript.TranscriptFileUri,\n\t\t\t\t\t\t\t\tjson: true,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst simple = this.getNodeParameter('simple', 0) as boolean;\n\t\t\t\t\t\t\tif (simple) {\n\t\t\t\t\t\t\t\tresponseData = {\n\t\t\t\t\t\t\t\t\ttranscript: responseData.results.transcripts\n\t\t\t\t\t\t\t\t\t\t.map((data: IDataObject) => data.transcript)\n\t\t\t\t\t\t\t\t\t\t.join(' '),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//https://docs.aws.amazon.com/transcribe/latest/dg/API_ListTranscriptionJobs.html\n\t\t\t\t\tif (operation === 'getAll') {\n\t\t\t\t\t\tconst returnAll = this.getNodeParameter('returnAll', i);\n\t\t\t\t\t\tconst filters = this.getNodeParameter('filters', i);\n\t\t\t\t\t\tconst action = 'Transcribe.ListTranscriptionJobs';\n\t\t\t\t\t\tconst body: IDataObject = {};\n\n\t\t\t\t\t\tif (filters.status) {\n\t\t\t\t\t\t\tbody.Status = filters.status;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (filters.jobNameContains) {\n\t\t\t\t\t\t\tbody.JobNameContains = filters.jobNameContains;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (returnAll) {\n\t\t\t\t\t\t\tresponseData = await awsApiRequestRESTAllItems.call(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t'TranscriptionJobSummaries',\n\t\t\t\t\t\t\t\t'transcribe',\n\t\t\t\t\t\t\t\t'POST',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\tJSON.stringify(body),\n\t\t\t\t\t\t\t\t{ 'x-amz-target': action, 'Content-Type': 'application/x-amz-json-1.1' },\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst limit = this.getNodeParameter('limit', i);\n\t\t\t\t\t\t\tbody.MaxResults = limit;\n\t\t\t\t\t\t\tresponseData = await awsApiRequestREST.call(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t'transcribe',\n\t\t\t\t\t\t\t\t'POST',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\tJSON.stringify(body),\n\t\t\t\t\t\t\t\t{ 'x-amz-target': action, 'Content-Type': 'application/x-amz-json-1.1' },\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tresponseData = responseData.TranscriptionJobSummaries;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(responseData)) {\n\t\t\t\t\treturnData.push.apply(returnData, responseData as IDataObject[]);\n\t\t\t\t} else {\n\t\t\t\t\treturnData.push(responseData as IDataObject);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (this.continueOnFail()) {\n\t\t\t\t\treturnData.push({ error: error.message });\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t\treturn [this.helpers.returnJsonArray(returnData)];\n\t}\n}\n"],"mappings":"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","names":[]}