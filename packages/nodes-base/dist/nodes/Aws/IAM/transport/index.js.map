{"version":3,"sources":["../../../../../nodes/Aws/IAM/transport/index.ts"],"sourcesContent":["import type {\n\tIExecuteSingleFunctions,\n\tIDataObject,\n\tIHttpRequestOptions,\n\tILoadOptionsFunctions,\n\tIPollFunctions,\n\tJsonObject,\n} from 'n8n-workflow';\nimport { NodeApiError } from 'n8n-workflow';\n\nimport { BASE_URL } from '../helpers/constants';\n\nconst errorMapping: IDataObject = {\n\t403: 'The AWS credentials are not valid!',\n};\n\nexport async function awsApiRequest(\n\tthis: ILoadOptionsFunctions | IPollFunctions | IExecuteSingleFunctions,\n\topts: IHttpRequestOptions,\n): Promise<IDataObject> {\n\tconst requestOptions: IHttpRequestOptions = {\n\t\tbaseURL: BASE_URL,\n\t\tjson: true,\n\t\t...opts,\n\t\theaders: {\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t...(opts.headers ?? {}),\n\t\t},\n\t};\n\n\tif (opts.body) {\n\t\trequestOptions.body = new URLSearchParams(opts.body as Record<string, string>).toString();\n\t}\n\n\ttry {\n\t\tconst response = (await this.helpers.requestWithAuthentication.call(\n\t\t\tthis,\n\t\t\t'aws',\n\t\t\trequestOptions,\n\t\t)) as IDataObject;\n\n\t\treturn response;\n\t} catch (error) {\n\t\tconst statusCode = (error?.statusCode || error?.cause?.statusCode) as string;\n\n\t\tif (statusCode && errorMapping[statusCode]) {\n\t\t\tthrow new NodeApiError(this.getNode(), {\n\t\t\t\tmessage: `AWS error response [${statusCode}]: ${errorMapping[statusCode] as string}`,\n\t\t\t});\n\t\t} else {\n\t\t\tthrow new NodeApiError(this.getNode(), error as JsonObject);\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,0BAA6B;AAE7B,uBAAyB;AAEzB,MAAM,eAA4B;AAAA,EACjC,KAAK;AACN;AAEA,eAAsB,cAErB,MACuB;AACvB,QAAM,iBAAsC;AAAA,IAC3C,SAAS;AAAA,IACT,MAAM;AAAA,IACN,GAAG;AAAA,IACH,SAAS;AAAA,MACR,gBAAgB;AAAA,MAChB,GAAI,KAAK,WAAW,CAAC;AAAA,IACtB;AAAA,EACD;AAEA,MAAI,KAAK,MAAM;AACd,mBAAe,OAAO,IAAI,gBAAgB,KAAK,IAA8B,EAAE,SAAS;AAAA,EACzF;AAEA,MAAI;AACH,UAAM,WAAY,MAAM,KAAK,QAAQ,0BAA0B;AAAA,MAC9D;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAEA,WAAO;AAAA,EACR,SAAS,OAAO;AACf,UAAM,aAAc,OAAO,cAAc,OAAO,OAAO;AAEvD,QAAI,cAAc,aAAa,UAAU,GAAG;AAC3C,YAAM,IAAI,iCAAa,KAAK,QAAQ,GAAG;AAAA,QACtC,SAAS,uBAAuB,UAAU,MAAM,aAAa,UAAU,CAAW;AAAA,MACnF,CAAC;AAAA,IACF,OAAO;AACN,YAAM,IAAI,iCAAa,KAAK,QAAQ,GAAG,KAAmB;AAAA,IAC3D;AAAA,EACD;AACD;","names":[]}