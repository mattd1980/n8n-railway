{"version":3,"sources":["../../../../../../nodes/ItemLists/V3/actions/itemList/limit.operation.ts"],"sourcesContent":["import type { IExecuteFunctions, INodeExecutionData, INodeProperties } from 'n8n-workflow';\n\nimport { updateDisplayOptions } from '@utils/utilities';\n\nconst properties: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Max Items',\n\t\tname: 'maxItems',\n\t\ttype: 'number',\n\t\ttypeOptions: {\n\t\t\tminValue: 1,\n\t\t},\n\t\tdefault: 1,\n\t\tdescription: 'If there are more items than this number, some are removed',\n\t},\n\t{\n\t\tdisplayName: 'Keep',\n\t\tname: 'keep',\n\t\ttype: 'options',\n\t\toptions: [\n\t\t\t{\n\t\t\t\tname: 'First Items',\n\t\t\t\tvalue: 'firstItems',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Last Items',\n\t\t\t\tvalue: 'lastItems',\n\t\t\t},\n\t\t],\n\t\tdefault: 'firstItems',\n\t\tdescription: 'When removing items, whether to keep the ones at the start or the ending',\n\t},\n];\n\nconst displayOptions = {\n\tshow: {\n\t\tresource: ['itemList'],\n\t\toperation: ['limit'],\n\t},\n};\n\nexport const description = updateDisplayOptions(displayOptions, properties);\n\nexport async function execute(\n\tthis: IExecuteFunctions,\n\titems: INodeExecutionData[],\n): Promise<INodeExecutionData[]> {\n\tlet returnData = items;\n\tconst maxItems = this.getNodeParameter('maxItems', 0) as number;\n\tconst keep = this.getNodeParameter('keep', 0) as string;\n\n\tif (maxItems > items.length) {\n\t\treturn returnData;\n\t}\n\n\tif (keep === 'firstItems') {\n\t\treturnData = items.slice(0, maxItems);\n\t} else {\n\t\treturnData = items.slice(items.length - maxItems, items.length);\n\t}\n\treturn returnData;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,uBAAqC;AAErC,MAAM,aAAgC;AAAA,EACrC;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,aAAa;AAAA,MACZ,UAAU;AAAA,IACX;AAAA,IACA,SAAS;AAAA,IACT,aAAa;AAAA,EACd;AAAA,EACA;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS;AAAA,MACR;AAAA,QACC,MAAM;AAAA,QACN,OAAO;AAAA,MACR;AAAA,MACA;AAAA,QACC,MAAM;AAAA,QACN,OAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,SAAS;AAAA,IACT,aAAa;AAAA,EACd;AACD;AAEA,MAAM,iBAAiB;AAAA,EACtB,MAAM;AAAA,IACL,UAAU,CAAC,UAAU;AAAA,IACrB,WAAW,CAAC,OAAO;AAAA,EACpB;AACD;AAEO,MAAM,kBAAc,uCAAqB,gBAAgB,UAAU;AAE1E,eAAsB,QAErB,OACgC;AAChC,MAAI,aAAa;AACjB,QAAM,WAAW,KAAK,iBAAiB,YAAY,CAAC;AACpD,QAAM,OAAO,KAAK,iBAAiB,QAAQ,CAAC;AAE5C,MAAI,WAAW,MAAM,QAAQ;AAC5B,WAAO;AAAA,EACR;AAEA,MAAI,SAAS,cAAc;AAC1B,iBAAa,MAAM,MAAM,GAAG,QAAQ;AAAA,EACrC,OAAO;AACN,iBAAa,MAAM,MAAM,MAAM,SAAS,UAAU,MAAM,MAAM;AAAA,EAC/D;AACA,SAAO;AACR;","names":[]}