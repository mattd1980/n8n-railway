{"version":3,"sources":["../../../../nodes/FacebookLeadAds/methods/listSearch.ts"],"sourcesContent":["import type { ILoadOptionsFunctions, INodeListSearchResult } from 'n8n-workflow';\n\nimport { facebookFormList, facebookPageList } from '../GenericFunctions';\n\nconst filterMatches = (name: string, filter?: string): boolean =>\n\t!filter || name?.toLowerCase().includes(filter.toLowerCase());\n\nexport async function pageList(\n\tthis: ILoadOptionsFunctions,\n\tfilter?: string,\n\tpaginationToken?: string,\n): Promise<INodeListSearchResult> {\n\tconst { data: pages, paging } = await facebookPageList.call(this, paginationToken);\n\treturn {\n\t\tresults: pages\n\t\t\t.filter((page) => filterMatches(page.name, filter))\n\t\t\t.map((page) => ({\n\t\t\t\tname: page.name,\n\t\t\t\tvalue: page.id,\n\t\t\t\turl: `https://facebook.com/${page.id}`,\n\t\t\t})),\n\t\tpaginationToken: paging?.next ? paging?.cursors?.after : undefined,\n\t};\n}\n\nexport async function formList(\n\tthis: ILoadOptionsFunctions,\n\tfilter?: string,\n\tpaginationToken?: string,\n): Promise<INodeListSearchResult> {\n\tconst pageId = this.getNodeParameter('page', '', { extractValue: true }) as string;\n\n\tconst { data: forms, paging } = await facebookFormList.call(this, pageId, paginationToken);\n\treturn {\n\t\tresults: forms\n\t\t\t.filter((form) => filterMatches(form.name, filter))\n\t\t\t.map((form) => ({\n\t\t\t\tname: form.name,\n\t\t\t\tvalue: form.id,\n\t\t\t})),\n\t\tpaginationToken: paging?.next ? paging?.cursors?.after : undefined,\n\t};\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,8BAAmD;AAEnD,MAAM,gBAAgB,CAAC,MAAc,WACpC,CAAC,UAAU,MAAM,YAAY,EAAE,SAAS,OAAO,YAAY,CAAC;AAE7D,eAAsB,SAErB,QACA,iBACiC;AACjC,QAAM,EAAE,MAAM,OAAO,OAAO,IAAI,MAAM,yCAAiB,KAAK,MAAM,eAAe;AACjF,SAAO;AAAA,IACN,SAAS,MACP,OAAO,CAAC,SAAS,cAAc,KAAK,MAAM,MAAM,CAAC,EACjD,IAAI,CAAC,UAAU;AAAA,MACf,MAAM,KAAK;AAAA,MACX,OAAO,KAAK;AAAA,MACZ,KAAK,wBAAwB,KAAK,EAAE;AAAA,IACrC,EAAE;AAAA,IACH,iBAAiB,QAAQ,OAAO,QAAQ,SAAS,QAAQ;AAAA,EAC1D;AACD;AAEA,eAAsB,SAErB,QACA,iBACiC;AACjC,QAAM,SAAS,KAAK,iBAAiB,QAAQ,IAAI,EAAE,cAAc,KAAK,CAAC;AAEvE,QAAM,EAAE,MAAM,OAAO,OAAO,IAAI,MAAM,yCAAiB,KAAK,MAAM,QAAQ,eAAe;AACzF,SAAO;AAAA,IACN,SAAS,MACP,OAAO,CAAC,SAAS,cAAc,KAAK,MAAM,MAAM,CAAC,EACjD,IAAI,CAAC,UAAU;AAAA,MACf,MAAM,KAAK;AAAA,MACX,OAAO,KAAK;AAAA,IACb,EAAE;AAAA,IACH,iBAAiB,QAAQ,OAAO,QAAQ,SAAS,QAAQ;AAAA,EAC1D;AACD;","names":[]}