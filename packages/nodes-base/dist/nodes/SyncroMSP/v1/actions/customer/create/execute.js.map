{"version":3,"sources":["../../../../../../../nodes/SyncroMSP/v1/actions/customer/create/execute.ts"],"sourcesContent":["import type { IExecuteFunctions, IDataObject, INodeExecutionData } from 'n8n-workflow';\n\nimport { apiRequest } from '../../../transport';\n\nexport async function addCustomer(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst email = this.getNodeParameter('email', index) as IDataObject;\n\tconst {\n\t\taddress,\n\t\tgetSms,\n\t\tbusinessName,\n\t\tlastname,\n\t\tfirstName,\n\t\tinvoiceCcEmails,\n\t\tnoEmail,\n\t\tnotes,\n\t\tnotificationEmail,\n\t\tphone,\n\t\treferredBy,\n\t} = this.getNodeParameter('additionalFields', index);\n\n\tconst qs = {} as IDataObject;\n\tconst requestMethod = 'POST';\n\tconst endpoint = 'customers';\n\tlet body = {} as IDataObject;\n\tlet addressData = address as IDataObject;\n\n\tif (addressData) {\n\t\taddressData = addressData.addressFields as IDataObject;\n\t\taddressData.address_2 = addressData.address2;\n\t}\n\n\tbody = {\n\t\t...addressData,\n\t\tbusiness_name: businessName,\n\t\temail,\n\t\tfirstname: firstName,\n\t\tget_sms: getSms,\n\t\tinvoice_cc_emails: ((invoiceCcEmails as string[]) || []).join(','),\n\t\tlastname,\n\t\tno_email: noEmail,\n\t\tnotes,\n\t\tnotification_email: notificationEmail,\n\t\tphone,\n\t\treferred_by: referredBy,\n\t};\n\n\tconst responseData = await apiRequest.call(this, requestMethod, endpoint, body, qs);\n\n\treturn this.helpers.returnJsonArray(responseData.customer as IDataObject);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,uBAA2B;AAE3B,eAAsB,YAErB,OACgC;AAChC,QAAM,QAAQ,KAAK,iBAAiB,SAAS,KAAK;AAClD,QAAM;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD,IAAI,KAAK,iBAAiB,oBAAoB,KAAK;AAEnD,QAAM,KAAK,CAAC;AACZ,QAAM,gBAAgB;AACtB,QAAM,WAAW;AACjB,MAAI,OAAO,CAAC;AACZ,MAAI,cAAc;AAElB,MAAI,aAAa;AAChB,kBAAc,YAAY;AAC1B,gBAAY,YAAY,YAAY;AAAA,EACrC;AAEA,SAAO;AAAA,IACN,GAAG;AAAA,IACH,eAAe;AAAA,IACf;AAAA,IACA,WAAW;AAAA,IACX,SAAS;AAAA,IACT,oBAAqB,mBAAgC,CAAC,GAAG,KAAK,GAAG;AAAA,IACjE;AAAA,IACA,UAAU;AAAA,IACV;AAAA,IACA,oBAAoB;AAAA,IACpB;AAAA,IACA,aAAa;AAAA,EACd;AAEA,QAAM,eAAe,MAAM,4BAAW,KAAK,MAAM,eAAe,UAAU,MAAM,EAAE;AAElF,SAAO,KAAK,QAAQ,gBAAgB,aAAa,QAAuB;AACzE;","names":[]}