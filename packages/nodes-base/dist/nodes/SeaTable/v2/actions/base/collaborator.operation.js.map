{"version":3,"sources":["../../../../../../nodes/SeaTable/v2/actions/base/collaborator.operation.ts"],"sourcesContent":["import {\n\ttype IDataObject,\n\ttype INodeExecutionData,\n\ttype INodeProperties,\n\ttype IExecuteFunctions,\n\tupdateDisplayOptions,\n} from 'n8n-workflow';\n\nimport { seaTableApiRequest } from '../../GenericFunctions';\nimport type { ICollaborator } from '../Interfaces';\n\nexport const properties: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Name or email of the collaborator',\n\t\tname: 'searchString',\n\t\ttype: 'string',\n\t\tplaceholder: 'Enter the name or the email or the collaborator',\n\t\trequired: true,\n\t\tdefault: '',\n\t\tdescription:\n\t\t\t'SeaTable identifies users with a unique username like 244b43hr6fy54bb4afa2c2cb7369d244@auth.local. Get this username from an email or the name of a collaborator.',\n\t},\n];\n\nconst displayOptions = {\n\tshow: {\n\t\tresource: ['base'],\n\t\toperation: ['collaborator'],\n\t},\n};\n\nexport const description = updateDisplayOptions(displayOptions, properties);\n\nexport async function execute(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst searchString = this.getNodeParameter('searchString', index) as string;\n\n\tconst collaboratorsResult = await seaTableApiRequest.call(\n\t\tthis,\n\t\t{},\n\t\t'GET',\n\t\t'/api-gateway/api/v2/dtables/{{dtable_uuid}}/related-users/',\n\t);\n\tconst collaborators = collaboratorsResult.user_list || [];\n\n\tconst data = collaborators.filter(\n\t\t(col: ICollaborator) =>\n\t\t\tcol.contact_email.includes(searchString) || col.name.includes(searchString),\n\t);\n\n\treturn this.helpers.returnJsonArray(data as IDataObject[]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAMO;AAEP,8BAAmC;AAG5B,MAAM,aAAgC;AAAA,EAC5C;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,aAAa;AAAA,IACb,UAAU;AAAA,IACV,SAAS;AAAA,IACT,aACC;AAAA,EACF;AACD;AAEA,MAAM,iBAAiB;AAAA,EACtB,MAAM;AAAA,IACL,UAAU,CAAC,MAAM;AAAA,IACjB,WAAW,CAAC,cAAc;AAAA,EAC3B;AACD;AAEO,MAAM,kBAAc,0CAAqB,gBAAgB,UAAU;AAE1E,eAAsB,QAErB,OACgC;AAChC,QAAM,eAAe,KAAK,iBAAiB,gBAAgB,KAAK;AAEhE,QAAM,sBAAsB,MAAM,2CAAmB;AAAA,IACpD;AAAA,IACA,CAAC;AAAA,IACD;AAAA,IACA;AAAA,EACD;AACA,QAAM,gBAAgB,oBAAoB,aAAa,CAAC;AAExD,QAAM,OAAO,cAAc;AAAA,IAC1B,CAAC,QACA,IAAI,cAAc,SAAS,YAAY,KAAK,IAAI,KAAK,SAAS,YAAY;AAAA,EAC5E;AAEA,SAAO,KAAK,QAAQ,gBAAgB,IAAqB;AAC1D;","names":[]}