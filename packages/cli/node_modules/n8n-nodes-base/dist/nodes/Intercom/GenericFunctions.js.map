{"version":3,"sources":["../../../nodes/Intercom/GenericFunctions.ts"],"sourcesContent":["import type {\n\tIDataObject,\n\tIExecuteFunctions,\n\tIHookFunctions,\n\tILoadOptionsFunctions,\n\tJsonObject,\n\tIHttpRequestOptions,\n\tIHttpRequestMethods,\n} from 'n8n-workflow';\nimport { NodeApiError } from 'n8n-workflow';\n\nexport async function intercomApiRequest(\n\tthis: IHookFunctions | IExecuteFunctions | ILoadOptionsFunctions,\n\tendpoint: string,\n\tmethod: IHttpRequestMethods,\n\n\tbody: any = {},\n\tquery?: IDataObject,\n\turi?: string,\n): Promise<any> {\n\tconst options: IHttpRequestOptions = {\n\t\tmethod,\n\t\tqs: query,\n\t\turl: uri ?? `https://api.intercom.io${endpoint}`,\n\t\tbody,\n\t\tjson: true,\n\t};\n\n\ttry {\n\t\treturn await this.helpers.httpRequestWithAuthentication.call(this, 'intercomApi', options);\n\t} catch (error) {\n\t\tthrow new NodeApiError(this.getNode(), error as JsonObject);\n\t}\n}\n\n/**\n * Make an API request to paginated intercom endpoint\n * and return all results\n */\nexport async function intercomApiRequestAllItems(\n\tthis: IHookFunctions | IExecuteFunctions,\n\tpropertyName: string,\n\tendpoint: string,\n\tmethod: IHttpRequestMethods,\n\n\tbody: any = {},\n\tquery: IDataObject = {},\n): Promise<any> {\n\tconst returnData: IDataObject[] = [];\n\n\tlet responseData;\n\n\tquery.per_page = 60;\n\n\tlet uri: string | undefined;\n\n\tdo {\n\t\tresponseData = await intercomApiRequest.call(this, endpoint, method, body, query, uri);\n\t\turi = responseData.pages.next;\n\t\treturnData.push.apply(returnData, responseData[propertyName] as IDataObject[]);\n\t} while (responseData.pages?.next !== null);\n\n\treturn returnData;\n}\n\nexport function validateJSON(json: string | undefined): any {\n\tlet result;\n\ttry {\n\t\tresult = JSON.parse(json!);\n\t} catch (exception) {\n\t\tresult = '';\n\t}\n\treturn result;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,0BAA6B;AAE7B,eAAsB,mBAErB,UACA,QAEA,OAAY,CAAC,GACb,OACA,KACe;AACf,QAAM,UAA+B;AAAA,IACpC;AAAA,IACA,IAAI;AAAA,IACJ,KAAK,OAAO,0BAA0B,QAAQ;AAAA,IAC9C;AAAA,IACA,MAAM;AAAA,EACP;AAEA,MAAI;AACH,WAAO,MAAM,KAAK,QAAQ,8BAA8B,KAAK,MAAM,eAAe,OAAO;AAAA,EAC1F,SAAS,OAAO;AACf,UAAM,IAAI,iCAAa,KAAK,QAAQ,GAAG,KAAmB;AAAA,EAC3D;AACD;AAMA,eAAsB,2BAErB,cACA,UACA,QAEA,OAAY,CAAC,GACb,QAAqB,CAAC,GACP;AACf,QAAM,aAA4B,CAAC;AAEnC,MAAI;AAEJ,QAAM,WAAW;AAEjB,MAAI;AAEJ,KAAG;AACF,mBAAe,MAAM,mBAAmB,KAAK,MAAM,UAAU,QAAQ,MAAM,OAAO,GAAG;AACrF,UAAM,aAAa,MAAM;AACzB,eAAW,KAAK,MAAM,YAAY,aAAa,YAAY,CAAkB;AAAA,EAC9E,SAAS,aAAa,OAAO,SAAS;AAEtC,SAAO;AACR;AAEO,SAAS,aAAa,MAA+B;AAC3D,MAAI;AACJ,MAAI;AACH,aAAS,KAAK,MAAM,IAAK;AAAA,EAC1B,SAAS,WAAW;AACnB,aAAS;AAAA,EACV;AACA,SAAO;AACR;","names":[]}