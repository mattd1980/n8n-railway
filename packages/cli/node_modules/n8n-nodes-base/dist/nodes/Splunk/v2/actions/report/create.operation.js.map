{"version":3,"sources":["../../../../../../nodes/Splunk/v2/actions/report/create.operation.ts"],"sourcesContent":["import type { INodeProperties, IExecuteFunctions, IDataObject } from 'n8n-workflow';\n\nimport { updateDisplayOptions } from '../../../../../utils/utilities';\nimport { searchJobRLC } from '../../helpers/descriptions';\nimport { formatFeed } from '../../helpers/utils';\nimport { splunkApiJsonRequest, splunkApiRequest } from '../../transport';\n\nconst properties: INodeProperties[] = [\n\tsearchJobRLC,\n\t{\n\t\tdisplayName: 'Name',\n\t\tname: 'name',\n\t\ttype: 'string',\n\t\tdefault: '',\n\t\tdescription: 'The name of the report',\n\t},\n];\n\nconst displayOptions = {\n\tshow: {\n\t\tresource: ['report'],\n\t\toperation: ['create'],\n\t},\n};\n\nexport const description = updateDisplayOptions(displayOptions, properties);\n\nexport async function execute(\n\tthis: IExecuteFunctions,\n\ti: number,\n): Promise<IDataObject | IDataObject[]> {\n\tconst name = this.getNodeParameter('name', i) as string;\n\tconst searchJobId = this.getNodeParameter('searchJobId', i, '', { extractValue: true }) as string;\n\tconst endpoint = `/services/search/jobs/${searchJobId}`;\n\n\tconst searchJob = ((await splunkApiJsonRequest.call(this, 'GET', endpoint)) ?? [])[0];\n\n\tconst body: IDataObject = {\n\t\tname,\n\t\tsearch: searchJob.search,\n\t\talert_type: 'always',\n\t\t'dispatch.earliest_time': searchJob.earliestTime,\n\t\t'dispatch.latest_time': searchJob.latestTime,\n\t\tis_scheduled: searchJob.isScheduled,\n\t\tcron_schedule: searchJob.cronSchedule,\n\t};\n\n\tconst returnData = await splunkApiRequest\n\t\t.call(this, 'POST', '/services/saved/searches', body)\n\t\t.then(formatFeed);\n\n\treturn returnData;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,uBAAqC;AACrC,0BAA6B;AAC7B,mBAA2B;AAC3B,uBAAuD;AAEvD,MAAM,aAAgC;AAAA,EACrC;AAAA,EACA;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS;AAAA,IACT,aAAa;AAAA,EACd;AACD;AAEA,MAAM,iBAAiB;AAAA,EACtB,MAAM;AAAA,IACL,UAAU,CAAC,QAAQ;AAAA,IACnB,WAAW,CAAC,QAAQ;AAAA,EACrB;AACD;AAEO,MAAM,kBAAc,uCAAqB,gBAAgB,UAAU;AAE1E,eAAsB,QAErB,GACuC;AACvC,QAAM,OAAO,KAAK,iBAAiB,QAAQ,CAAC;AAC5C,QAAM,cAAc,KAAK,iBAAiB,eAAe,GAAG,IAAI,EAAE,cAAc,KAAK,CAAC;AACtF,QAAM,WAAW,yBAAyB,WAAW;AAErD,QAAM,aAAc,MAAM,sCAAqB,KAAK,MAAM,OAAO,QAAQ,KAAM,CAAC,GAAG,CAAC;AAEpF,QAAM,OAAoB;AAAA,IACzB;AAAA,IACA,QAAQ,UAAU;AAAA,IAClB,YAAY;AAAA,IACZ,0BAA0B,UAAU;AAAA,IACpC,wBAAwB,UAAU;AAAA,IAClC,cAAc,UAAU;AAAA,IACxB,eAAe,UAAU;AAAA,EAC1B;AAEA,QAAM,aAAa,MAAM,kCACvB,KAAK,MAAM,QAAQ,4BAA4B,IAAI,EACnD,KAAK,uBAAU;AAEjB,SAAO;AACR;","names":[]}