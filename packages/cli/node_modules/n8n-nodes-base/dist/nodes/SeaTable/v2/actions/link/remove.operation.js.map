{"version":3,"sources":["../../../../../../nodes/SeaTable/v2/actions/link/remove.operation.ts"],"sourcesContent":["/* eslint-disable n8n-nodes-base/node-param-display-name-wrong-for-dynamic-options */\n/* eslint-disable n8n-nodes-base/node-param-description-wrong-for-dynamic-options */\nimport {\n\ttype IDataObject,\n\ttype INodeExecutionData,\n\ttype INodeProperties,\n\ttype IExecuteFunctions,\n\tupdateDisplayOptions,\n} from 'n8n-workflow';\n\nimport { seaTableApiRequest } from '../../GenericFunctions';\n\nexport const properties: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Table Name (Source)',\n\t\tname: 'tableName',\n\t\ttype: 'options',\n\t\tplaceholder: 'Name of table',\n\t\trequired: true,\n\t\ttypeOptions: {\n\t\t\tloadOptionsMethod: 'getTableNameAndId',\n\t\t},\n\t\tdefault: '',\n\t\tdescription:\n\t\t\t'Choose from the list, of specify by using an expression. Provide it in the way \"table_name:::table_id\".',\n\t},\n\t{\n\t\tdisplayName: 'Link Column',\n\t\tname: 'linkColumn',\n\t\ttype: 'options',\n\t\ttypeOptions: {\n\t\t\tloadOptionsDependsOn: ['tableName'],\n\t\t\tloadOptionsMethod: 'getLinkColumns',\n\t\t},\n\t\trequired: true,\n\t\tdefault: '',\n\t\tdescription:\n\t\t\t'Choose from the list of specify the Link Column by using an expression. You have to provide it in the way \"column_name:::link_id:::other_table_id\".',\n\t},\n\t{\n\t\tdisplayName: 'Row ID From the Source Table',\n\t\tname: 'linkColumnSourceId',\n\t\ttype: 'string',\n\t\trequired: true,\n\t\tdefault: '',\n\t\tdescription: 'Provide the row ID of table you selected',\n\t},\n\t{\n\t\tdisplayName: 'Row ID From the Target Table',\n\t\tname: 'linkColumnTargetId',\n\t\ttype: 'string',\n\t\trequired: true,\n\t\tdefault: '',\n\t\tdescription: 'Provide the row ID of table you want to link',\n\t},\n];\n\nconst displayOptions = {\n\tshow: {\n\t\tresource: ['link'],\n\t\toperation: ['remove'],\n\t},\n};\n\nexport const description = updateDisplayOptions(displayOptions, properties);\n\nexport async function execute(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst tableName = this.getNodeParameter('tableName', index) as string;\n\tconst linkColumn = this.getNodeParameter('linkColumn', index) as any;\n\tconst linkColumnSourceId = this.getNodeParameter('linkColumnSourceId', index) as string;\n\tconst linkColumnTargetId = this.getNodeParameter('linkColumnTargetId', index) as string;\n\n\tconst body = {\n\t\tlink_id: linkColumn.split(':::')[1],\n\t\ttable_id: tableName.split(':::')[1],\n\t\tother_table_id: linkColumn.split(':::')[2],\n\t\tother_rows_ids_map: {\n\t\t\t[linkColumnSourceId]: [linkColumnTargetId],\n\t\t},\n\t};\n\n\tconst responseData = await seaTableApiRequest.call(\n\t\tthis,\n\t\t{},\n\t\t'DELETE',\n\t\t'/api-gateway/api/v2/dtables/{{dtable_uuid}}/links/',\n\t\tbody,\n\t);\n\n\treturn this.helpers.returnJsonArray(responseData as IDataObject[]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,0BAMO;AAEP,8BAAmC;AAE5B,MAAM,aAAgC;AAAA,EAC5C;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,aAAa;AAAA,IACb,UAAU;AAAA,IACV,aAAa;AAAA,MACZ,mBAAmB;AAAA,IACpB;AAAA,IACA,SAAS;AAAA,IACT,aACC;AAAA,EACF;AAAA,EACA;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,aAAa;AAAA,MACZ,sBAAsB,CAAC,WAAW;AAAA,MAClC,mBAAmB;AAAA,IACpB;AAAA,IACA,UAAU;AAAA,IACV,SAAS;AAAA,IACT,aACC;AAAA,EACF;AAAA,EACA;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,UAAU;AAAA,IACV,SAAS;AAAA,IACT,aAAa;AAAA,EACd;AAAA,EACA;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,UAAU;AAAA,IACV,SAAS;AAAA,IACT,aAAa;AAAA,EACd;AACD;AAEA,MAAM,iBAAiB;AAAA,EACtB,MAAM;AAAA,IACL,UAAU,CAAC,MAAM;AAAA,IACjB,WAAW,CAAC,QAAQ;AAAA,EACrB;AACD;AAEO,MAAM,kBAAc,0CAAqB,gBAAgB,UAAU;AAE1E,eAAsB,QAErB,OACgC;AAChC,QAAM,YAAY,KAAK,iBAAiB,aAAa,KAAK;AAC1D,QAAM,aAAa,KAAK,iBAAiB,cAAc,KAAK;AAC5D,QAAM,qBAAqB,KAAK,iBAAiB,sBAAsB,KAAK;AAC5E,QAAM,qBAAqB,KAAK,iBAAiB,sBAAsB,KAAK;AAE5E,QAAM,OAAO;AAAA,IACZ,SAAS,WAAW,MAAM,KAAK,EAAE,CAAC;AAAA,IAClC,UAAU,UAAU,MAAM,KAAK,EAAE,CAAC;AAAA,IAClC,gBAAgB,WAAW,MAAM,KAAK,EAAE,CAAC;AAAA,IACzC,oBAAoB;AAAA,MACnB,CAAC,kBAAkB,GAAG,CAAC,kBAAkB;AAAA,IAC1C;AAAA,EACD;AAEA,QAAM,eAAe,MAAM,2CAAmB;AAAA,IAC7C;AAAA,IACA,CAAC;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAEA,SAAO,KAAK,QAAQ,gBAAgB,YAA6B;AAClE;","names":[]}