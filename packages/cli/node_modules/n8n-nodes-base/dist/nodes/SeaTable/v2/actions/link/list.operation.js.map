{"version":3,"sources":["../../../../../../nodes/SeaTable/v2/actions/link/list.operation.ts"],"sourcesContent":["/* eslint-disable n8n-nodes-base/node-param-display-name-wrong-for-dynamic-options */\n/* eslint-disable n8n-nodes-base/node-param-description-wrong-for-dynamic-options */\nimport {\n\ttype IDataObject,\n\ttype INodeExecutionData,\n\ttype INodeProperties,\n\ttype IExecuteFunctions,\n\tupdateDisplayOptions,\n} from 'n8n-workflow';\n\nimport { seaTableApiRequest } from '../../GenericFunctions';\n\nexport const properties: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Table Name',\n\t\tname: 'tableName',\n\t\ttype: 'options',\n\t\tplaceholder: 'Select a table',\n\t\trequired: true,\n\t\ttypeOptions: {\n\t\t\tloadOptionsMethod: 'getTableNameAndId',\n\t\t},\n\t\tdefault: '',\n\t\tdescription:\n\t\t\t'Choose from the list, of specify by using an expression. Provide it in the way \"table_name:::table_id\".',\n\t},\n\t{\n\t\tdisplayName: 'Link Column',\n\t\tname: 'linkColumn',\n\t\ttype: 'options',\n\t\ttypeOptions: {\n\t\t\tloadOptionsDependsOn: ['tableName'],\n\t\t\tloadOptionsMethod: 'getLinkColumnsWithColumnKey',\n\t\t},\n\t\trequired: true,\n\t\tdefault: '',\n\t\tdescription:\n\t\t\t'Choose from the list of specify the Link Column by using an expression. You have to provide it in the way \"column_name:::link_id:::other_table_id:::column_key\".',\n\t},\n\t{\n\t\tdisplayName: 'Row ID',\n\t\tname: 'rowId',\n\t\ttype: 'options',\n\t\tdescription:\n\t\t\t'Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>',\n\t\trequired: true,\n\t\ttypeOptions: {\n\t\t\tloadOptionsDependsOn: ['tableName'],\n\t\t\tloadOptionsMethod: 'getRowIds',\n\t\t},\n\t\tdefault: '',\n\t},\n];\n\nconst displayOptions = {\n\tshow: {\n\t\tresource: ['link'],\n\t\toperation: ['list'],\n\t},\n};\n\nexport const description = updateDisplayOptions(displayOptions, properties);\n\nexport async function execute(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\t// get parameters\n\tconst tableName = this.getNodeParameter('tableName', index) as string;\n\tconst linkColumn = this.getNodeParameter('linkColumn', index) as string;\n\tconst rowId = this.getNodeParameter('rowId', index) as string;\n\n\t// get rows\n\tconst responseData = await seaTableApiRequest.call(\n\t\tthis,\n\t\t{},\n\t\t'POST',\n\t\t'/api-gateway/api/v2/dtables/{{dtable_uuid}}/query-links/',\n\t\t{\n\t\t\ttable_id: tableName.split(':::')[1],\n\t\t\tlink_column_key: linkColumn.split(':::')[3],\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\trow_id: rowId,\n\t\t\t\t\toffset: 0,\n\t\t\t\t\tlimit: 100,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t);\n\treturn this.helpers.returnJsonArray(responseData as IDataObject[]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,0BAMO;AAEP,8BAAmC;AAE5B,MAAM,aAAgC;AAAA,EAC5C;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,aAAa;AAAA,IACb,UAAU;AAAA,IACV,aAAa;AAAA,MACZ,mBAAmB;AAAA,IACpB;AAAA,IACA,SAAS;AAAA,IACT,aACC;AAAA,EACF;AAAA,EACA;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,aAAa;AAAA,MACZ,sBAAsB,CAAC,WAAW;AAAA,MAClC,mBAAmB;AAAA,IACpB;AAAA,IACA,UAAU;AAAA,IACV,SAAS;AAAA,IACT,aACC;AAAA,EACF;AAAA,EACA;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,aACC;AAAA,IACD,UAAU;AAAA,IACV,aAAa;AAAA,MACZ,sBAAsB,CAAC,WAAW;AAAA,MAClC,mBAAmB;AAAA,IACpB;AAAA,IACA,SAAS;AAAA,EACV;AACD;AAEA,MAAM,iBAAiB;AAAA,EACtB,MAAM;AAAA,IACL,UAAU,CAAC,MAAM;AAAA,IACjB,WAAW,CAAC,MAAM;AAAA,EACnB;AACD;AAEO,MAAM,kBAAc,0CAAqB,gBAAgB,UAAU;AAE1E,eAAsB,QAErB,OACgC;AAEhC,QAAM,YAAY,KAAK,iBAAiB,aAAa,KAAK;AAC1D,QAAM,aAAa,KAAK,iBAAiB,cAAc,KAAK;AAC5D,QAAM,QAAQ,KAAK,iBAAiB,SAAS,KAAK;AAGlD,QAAM,eAAe,MAAM,2CAAmB;AAAA,IAC7C;AAAA,IACA,CAAC;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,MACC,UAAU,UAAU,MAAM,KAAK,EAAE,CAAC;AAAA,MAClC,iBAAiB,WAAW,MAAM,KAAK,EAAE,CAAC;AAAA,MAC1C,MAAM;AAAA,QACL;AAAA,UACC,QAAQ;AAAA,UACR,QAAQ;AAAA,UACR,OAAO;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACA,SAAO,KAAK,QAAQ,gBAAgB,YAA6B;AAClE;","names":[]}