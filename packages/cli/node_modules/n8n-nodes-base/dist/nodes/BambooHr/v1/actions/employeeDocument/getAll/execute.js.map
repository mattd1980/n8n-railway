{"version":3,"sources":["../../../../../../../nodes/BambooHr/v1/actions/employeeDocument/getAll/execute.ts"],"sourcesContent":["import type { IExecuteFunctions, IDataObject, INodeExecutionData } from 'n8n-workflow';\n\nimport { apiRequest } from '../../../transport';\n\nexport async function getAll(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst body: IDataObject = {};\n\tconst requestMethod = 'GET';\n\n\t//meta data\n\tconst id = this.getNodeParameter('employeeId', index) as string;\n\n\t//limit parameters\n\tconst simplifyOutput: boolean = this.getNodeParameter('simplifyOutput', index) as boolean;\n\tconst returnAll: boolean = this.getNodeParameter('returnAll', 0, false);\n\tconst limit: number = this.getNodeParameter('limit', 0, 0);\n\n\t//endpoint\n\tconst endpoint = `employees/${id}/files/view/`;\n\n\t//response\n\tconst responseData = await apiRequest.call(this, requestMethod, endpoint, body);\n\n\tconst onlyFilesArray = [];\n\n\t//return only files without categories\n\tif (simplifyOutput) {\n\t\tfor (let i = 0; i < responseData.categories.length; i++) {\n\t\t\tif (responseData.categories[i].hasOwnProperty('files')) {\n\t\t\t\tfor (let j = 0; j < responseData.categories[i].files.length; j++) {\n\t\t\t\t\tonlyFilesArray.push(responseData.categories[i].files[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!returnAll && onlyFilesArray.length > limit) {\n\t\t\treturn this.helpers.returnJsonArray(onlyFilesArray.slice(0, limit));\n\t\t} else {\n\t\t\treturn this.helpers.returnJsonArray(onlyFilesArray);\n\t\t}\n\t}\n\n\t//return limited result\n\tif (!returnAll && responseData.categories.length > limit) {\n\t\treturn this.helpers.returnJsonArray(responseData.categories.slice(0, limit) as IDataObject[]);\n\t}\n\n\t//return\n\treturn this.helpers.returnJsonArray(responseData.categories as IDataObject[]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,uBAA2B;AAE3B,eAAsB,OAErB,OACgC;AAChC,QAAM,OAAoB,CAAC;AAC3B,QAAM,gBAAgB;AAGtB,QAAM,KAAK,KAAK,iBAAiB,cAAc,KAAK;AAGpD,QAAM,iBAA0B,KAAK,iBAAiB,kBAAkB,KAAK;AAC7E,QAAM,YAAqB,KAAK,iBAAiB,aAAa,GAAG,KAAK;AACtE,QAAM,QAAgB,KAAK,iBAAiB,SAAS,GAAG,CAAC;AAGzD,QAAM,WAAW,aAAa,EAAE;AAGhC,QAAM,eAAe,MAAM,4BAAW,KAAK,MAAM,eAAe,UAAU,IAAI;AAE9E,QAAM,iBAAiB,CAAC;AAGxB,MAAI,gBAAgB;AACnB,aAAS,IAAI,GAAG,IAAI,aAAa,WAAW,QAAQ,KAAK;AACxD,UAAI,aAAa,WAAW,CAAC,EAAE,eAAe,OAAO,GAAG;AACvD,iBAAS,IAAI,GAAG,IAAI,aAAa,WAAW,CAAC,EAAE,MAAM,QAAQ,KAAK;AACjE,yBAAe,KAAK,aAAa,WAAW,CAAC,EAAE,MAAM,CAAC,CAAC;AAAA,QACxD;AAAA,MACD;AAAA,IACD;AAEA,QAAI,CAAC,aAAa,eAAe,SAAS,OAAO;AAChD,aAAO,KAAK,QAAQ,gBAAgB,eAAe,MAAM,GAAG,KAAK,CAAC;AAAA,IACnE,OAAO;AACN,aAAO,KAAK,QAAQ,gBAAgB,cAAc;AAAA,IACnD;AAAA,EACD;AAGA,MAAI,CAAC,aAAa,aAAa,WAAW,SAAS,OAAO;AACzD,WAAO,KAAK,QAAQ,gBAAgB,aAAa,WAAW,MAAM,GAAG,KAAK,CAAkB;AAAA,EAC7F;AAGA,SAAO,KAAK,QAAQ,gBAAgB,aAAa,UAA2B;AAC7E;","names":[]}