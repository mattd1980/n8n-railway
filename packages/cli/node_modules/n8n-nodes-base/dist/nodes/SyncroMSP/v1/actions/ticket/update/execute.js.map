{"version":3,"sources":["../../../../../../../nodes/SyncroMSP/v1/actions/ticket/update/execute.ts"],"sourcesContent":["import type { IExecuteFunctions, IDataObject, INodeExecutionData } from 'n8n-workflow';\nimport { NodeOperationError } from 'n8n-workflow';\n\nimport { apiRequest } from '../../../transport';\n\nexport async function updateTicket(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst id = this.getNodeParameter('ticketId', index) as IDataObject;\n\tconst { assetId, customerId, dueDate, issueType, status, subject, ticketType, contactId } =\n\t\tthis.getNodeParameter('updateFields', index);\n\n\tconst qs = {} as IDataObject;\n\tconst requestMethod = 'PUT';\n\tconst endpoint = `tickets/${id}`;\n\tlet body = {} as IDataObject;\n\n\tbody = {\n\t\t...(assetId && { asset_id: assetId }),\n\t\t...(customerId && { customer_id: customerId }),\n\t\t...(dueDate && { due_date: dueDate }),\n\t\t...(issueType && { problem_type: issueType }),\n\t\t...(status && { status }),\n\t\t...(subject && { subject }),\n\t\t...(ticketType && { ticket_type: ticketType }),\n\t\t...(contactId && { contact_id: contactId }),\n\t};\n\n\tif (!Object.keys(body).length) {\n\t\tthrow new NodeOperationError(this.getNode(), 'At least one update fields has to be defined', {\n\t\t\titemIndex: index,\n\t\t});\n\t}\n\n\tconst responseData = await apiRequest.call(this, requestMethod, endpoint, body, qs);\n\n\treturn this.helpers.returnJsonArray(responseData.ticket as IDataObject[]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,0BAAmC;AAEnC,uBAA2B;AAE3B,eAAsB,aAErB,OACgC;AAChC,QAAM,KAAK,KAAK,iBAAiB,YAAY,KAAK;AAClD,QAAM,EAAE,SAAS,YAAY,SAAS,WAAW,QAAQ,SAAS,YAAY,UAAU,IACvF,KAAK,iBAAiB,gBAAgB,KAAK;AAE5C,QAAM,KAAK,CAAC;AACZ,QAAM,gBAAgB;AACtB,QAAM,WAAW,WAAW,EAAE;AAC9B,MAAI,OAAO,CAAC;AAEZ,SAAO;AAAA,IACN,GAAI,WAAW,EAAE,UAAU,QAAQ;AAAA,IACnC,GAAI,cAAc,EAAE,aAAa,WAAW;AAAA,IAC5C,GAAI,WAAW,EAAE,UAAU,QAAQ;AAAA,IACnC,GAAI,aAAa,EAAE,cAAc,UAAU;AAAA,IAC3C,GAAI,UAAU,EAAE,OAAO;AAAA,IACvB,GAAI,WAAW,EAAE,QAAQ;AAAA,IACzB,GAAI,cAAc,EAAE,aAAa,WAAW;AAAA,IAC5C,GAAI,aAAa,EAAE,YAAY,UAAU;AAAA,EAC1C;AAEA,MAAI,CAAC,OAAO,KAAK,IAAI,EAAE,QAAQ;AAC9B,UAAM,IAAI,uCAAmB,KAAK,QAAQ,GAAG,gDAAgD;AAAA,MAC5F,WAAW;AAAA,IACZ,CAAC;AAAA,EACF;AAEA,QAAM,eAAe,MAAM,4BAAW,KAAK,MAAM,eAAe,UAAU,MAAM,EAAE;AAElF,SAAO,KAAK,QAAQ,gBAAgB,aAAa,MAAuB;AACzE;","names":[]}