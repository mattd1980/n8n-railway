{"version":3,"sources":["../../../../../nodes/Notion/shared/methods/listSearch.ts"],"sourcesContent":["import type {\n\tIDataObject,\n\tILoadOptionsFunctions,\n\tINodeListSearchItems,\n\tINodeListSearchResult,\n} from 'n8n-workflow';\n\nimport { notionApiRequestAllItems } from '../GenericFunctions';\n\nexport async function getDatabases(\n\tthis: ILoadOptionsFunctions,\n\tfilter?: string,\n): Promise<INodeListSearchResult> {\n\tconst returnData: INodeListSearchItems[] = [];\n\tconst body: IDataObject = {\n\t\tpage_size: 100,\n\t\tquery: filter,\n\t\tfilter: { property: 'object', value: 'database' },\n\t};\n\tconst databases = await notionApiRequestAllItems.call(this, 'results', 'POST', '/search', body);\n\tfor (const database of databases) {\n\t\treturnData.push({\n\t\t\tname: database.title[0]?.plain_text || database.id,\n\t\t\tvalue: database.id,\n\t\t\turl: database.url,\n\t\t});\n\t}\n\treturnData.sort((a, b) => {\n\t\tif (a.name.toLocaleLowerCase() < b.name.toLocaleLowerCase()) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.name.toLocaleLowerCase() > b.name.toLocaleLowerCase()) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\treturn { results: returnData };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,8BAAyC;AAEzC,eAAsB,aAErB,QACiC;AACjC,QAAM,aAAqC,CAAC;AAC5C,QAAM,OAAoB;AAAA,IACzB,WAAW;AAAA,IACX,OAAO;AAAA,IACP,QAAQ,EAAE,UAAU,UAAU,OAAO,WAAW;AAAA,EACjD;AACA,QAAM,YAAY,MAAM,iDAAyB,KAAK,MAAM,WAAW,QAAQ,WAAW,IAAI;AAC9F,aAAW,YAAY,WAAW;AACjC,eAAW,KAAK;AAAA,MACf,MAAM,SAAS,MAAM,CAAC,GAAG,cAAc,SAAS;AAAA,MAChD,OAAO,SAAS;AAAA,MAChB,KAAK,SAAS;AAAA,IACf,CAAC;AAAA,EACF;AACA,aAAW,KAAK,CAAC,GAAG,MAAM;AACzB,QAAI,EAAE,KAAK,kBAAkB,IAAI,EAAE,KAAK,kBAAkB,GAAG;AAC5D,aAAO;AAAA,IACR;AACA,QAAI,EAAE,KAAK,kBAAkB,IAAI,EAAE,KAAK,kBAAkB,GAAG;AAC5D,aAAO;AAAA,IACR;AACA,WAAO;AAAA,EACR,CAAC;AACD,SAAO,EAAE,SAAS,WAAW;AAC9B;","names":[]}