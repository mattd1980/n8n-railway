{"version":3,"sources":["../../../../../nodes/Aws/Cognito/transport/index.ts"],"sourcesContent":["import type {\n\tILoadOptionsFunctions,\n\tIPollFunctions,\n\tIHttpRequestOptions,\n\tIExecuteSingleFunctions,\n\tIDataObject,\n\tIHttpRequestMethods,\n} from 'n8n-workflow';\n\nimport type { AwsCredentialsType } from '../../../../credentials/Aws.credentials';\n\nexport async function awsApiRequest(\n\tthis: ILoadOptionsFunctions | IPollFunctions | IExecuteSingleFunctions,\n\tmethod: IHttpRequestMethods,\n\taction: string,\n\tbody: string,\n): Promise<any> {\n\tconst credentialsType = 'aws';\n\tconst credentials = await this.getCredentials<AwsCredentialsType>(credentialsType);\n\n\tconst requestOptions: IHttpRequestOptions = {\n\t\turl: '',\n\t\tmethod,\n\t\tbody,\n\t\theaders: {\n\t\t\t'Content-Type': 'application/x-amz-json-1.1',\n\t\t\t'X-Amz-Target': `AWSCognitoIdentityProviderService.${action}`,\n\t\t},\n\t\tqs: {\n\t\t\tservice: 'cognito-idp',\n\t\t\t_region: credentials.region,\n\t\t},\n\t};\n\n\treturn await this.helpers.httpRequestWithAuthentication.call(\n\t\tthis,\n\t\tcredentialsType,\n\t\trequestOptions,\n\t);\n}\n\nexport async function awsApiRequestAllItems(\n\tthis: ILoadOptionsFunctions | IPollFunctions | IExecuteSingleFunctions,\n\tmethod: IHttpRequestMethods,\n\taction: string,\n\tbody: IDataObject,\n\tpropertyName: string,\n): Promise<IDataObject[]> {\n\tconst returnData: IDataObject[] = [];\n\tlet nextToken: string | undefined;\n\n\tdo {\n\t\tconst requestBody: IDataObject = {\n\t\t\t...body,\n\t\t\t...(nextToken ? { NextToken: nextToken } : {}),\n\t\t};\n\n\t\tconst response = (await awsApiRequest.call(\n\t\t\tthis,\n\t\t\tmethod,\n\t\t\taction,\n\t\t\tJSON.stringify(requestBody),\n\t\t)) as IDataObject;\n\n\t\tconst items = (response[propertyName] ?? []) as IDataObject[];\n\t\treturnData.push(...items);\n\n\t\tnextToken = response.NextToken as string | undefined;\n\t} while (nextToken);\n\n\treturn returnData;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,eAAsB,cAErB,QACA,QACA,MACe;AACf,QAAM,kBAAkB;AACxB,QAAM,cAAc,MAAM,KAAK,eAAmC,eAAe;AAEjF,QAAM,iBAAsC;AAAA,IAC3C,KAAK;AAAA,IACL;AAAA,IACA;AAAA,IACA,SAAS;AAAA,MACR,gBAAgB;AAAA,MAChB,gBAAgB,qCAAqC,MAAM;AAAA,IAC5D;AAAA,IACA,IAAI;AAAA,MACH,SAAS;AAAA,MACT,SAAS,YAAY;AAAA,IACtB;AAAA,EACD;AAEA,SAAO,MAAM,KAAK,QAAQ,8BAA8B;AAAA,IACvD;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD;AAEA,eAAsB,sBAErB,QACA,QACA,MACA,cACyB;AACzB,QAAM,aAA4B,CAAC;AACnC,MAAI;AAEJ,KAAG;AACF,UAAM,cAA2B;AAAA,MAChC,GAAG;AAAA,MACH,GAAI,YAAY,EAAE,WAAW,UAAU,IAAI,CAAC;AAAA,IAC7C;AAEA,UAAM,WAAY,MAAM,cAAc;AAAA,MACrC;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,UAAU,WAAW;AAAA,IAC3B;AAEA,UAAM,QAAS,SAAS,YAAY,KAAK,CAAC;AAC1C,eAAW,KAAK,GAAG,KAAK;AAExB,gBAAY,SAAS;AAAA,EACtB,SAAS;AAET,SAAO;AACR;","names":[]}