{"version":3,"sources":["../../../nodes/SendGrid/GenericFunctions.ts"],"sourcesContent":["import type {\n\tIDataObject,\n\tIExecuteFunctions,\n\tIHookFunctions,\n\tIHttpRequestMethods,\n\tILoadOptionsFunctions,\n\tIRequestOptions,\n} from 'n8n-workflow';\n\nexport async function sendGridApiRequest(\n\tthis: IHookFunctions | IExecuteFunctions | ILoadOptionsFunctions,\n\tendpoint: string,\n\tmethod: IHttpRequestMethods,\n\n\tbody: any = {},\n\tqs: IDataObject = {},\n\toption: IDataObject = {},\n): Promise<any> {\n\tconst host = 'api.sendgrid.com/v3';\n\n\tconst options: IRequestOptions = {\n\t\tmethod,\n\t\tqs,\n\t\tbody,\n\t\turi: `https://${host}${endpoint}`,\n\t\tjson: true,\n\t};\n\n\tif (Object.keys(body as IDataObject).length === 0) {\n\t\tdelete options.body;\n\t}\n\n\tif (Object.keys(option).length !== 0) {\n\t\tObject.assign(options, option);\n\t}\n\n\treturn await this.helpers.requestWithAuthentication.call(this, 'sendGridApi', options);\n}\n\nexport async function sendGridApiRequestAllItems(\n\tthis: IExecuteFunctions | ILoadOptionsFunctions,\n\tendpoint: string,\n\tmethod: IHttpRequestMethods,\n\tpropertyName: string,\n\n\tbody: any = {},\n\tquery: IDataObject = {},\n): Promise<any> {\n\tconst returnData: IDataObject[] = [];\n\n\tlet responseData;\n\n\tlet uri;\n\n\tdo {\n\t\tresponseData = await sendGridApiRequest.call(this, endpoint, method, body, query, uri); // possible bug, as function does not have uri parameter\n\t\turi = responseData._metadata.next;\n\t\treturnData.push.apply(returnData, responseData[propertyName] as IDataObject[]);\n\t\tconst limit = query.limit as number | undefined;\n\t\tif (limit && returnData.length >= limit) {\n\t\t\treturn returnData;\n\t\t}\n\t} while (responseData._metadata.next !== undefined);\n\n\treturn returnData;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,eAAsB,mBAErB,UACA,QAEA,OAAY,CAAC,GACb,KAAkB,CAAC,GACnB,SAAsB,CAAC,GACR;AACf,QAAM,OAAO;AAEb,QAAM,UAA2B;AAAA,IAChC;AAAA,IACA;AAAA,IACA;AAAA,IACA,KAAK,WAAW,IAAI,GAAG,QAAQ;AAAA,IAC/B,MAAM;AAAA,EACP;AAEA,MAAI,OAAO,KAAK,IAAmB,EAAE,WAAW,GAAG;AAClD,WAAO,QAAQ;AAAA,EAChB;AAEA,MAAI,OAAO,KAAK,MAAM,EAAE,WAAW,GAAG;AACrC,WAAO,OAAO,SAAS,MAAM;AAAA,EAC9B;AAEA,SAAO,MAAM,KAAK,QAAQ,0BAA0B,KAAK,MAAM,eAAe,OAAO;AACtF;AAEA,eAAsB,2BAErB,UACA,QACA,cAEA,OAAY,CAAC,GACb,QAAqB,CAAC,GACP;AACf,QAAM,aAA4B,CAAC;AAEnC,MAAI;AAEJ,MAAI;AAEJ,KAAG;AACF,mBAAe,MAAM,mBAAmB,KAAK,MAAM,UAAU,QAAQ,MAAM,OAAO,GAAG;AACrF,UAAM,aAAa,UAAU;AAC7B,eAAW,KAAK,MAAM,YAAY,aAAa,YAAY,CAAkB;AAC7E,UAAM,QAAQ,MAAM;AACpB,QAAI,SAAS,WAAW,UAAU,OAAO;AACxC,aAAO;AAAA,IACR;AAAA,EACD,SAAS,aAAa,UAAU,SAAS;AAEzC,SAAO;AACR;","names":[]}