{"version":3,"sources":["../../../../nodes/EmailSend/v2/EmailSendV2.node.ts"],"sourcesContent":["import type {\n\tIExecuteFunctions,\n\tINodeExecutionData,\n\tINodeType,\n\tINodeTypeBaseDescription,\n\tINodeTypeDescription,\n} from 'n8n-workflow';\nimport { NodeConnectionTypes, SEND_AND_WAIT_OPERATION } from 'n8n-workflow';\n\nimport * as send from './send.operation';\nimport * as sendAndWait from './sendAndWait.operation';\nimport { smtpConnectionTest } from './utils';\nimport { sendAndWaitWebhooksDescription } from '../../../utils/sendAndWait/descriptions';\nimport { sendAndWaitWebhook } from '../../../utils/sendAndWait/utils';\n\nexport const versionDescription: INodeTypeDescription = {\n\tdisplayName: 'Send Email',\n\tname: 'emailSend',\n\ticon: 'fa:envelope',\n\tgroup: ['output'],\n\tversion: [2, 2.1],\n\tdescription: 'Sends an email using SMTP protocol',\n\tdefaults: {\n\t\tname: 'Send Email',\n\t\tcolor: '#00bb88',\n\t},\n\tinputs: [NodeConnectionTypes.Main],\n\toutputs: [NodeConnectionTypes.Main],\n\tusableAsTool: true,\n\tcredentials: [\n\t\t{\n\t\t\tname: 'smtp',\n\t\t\trequired: true,\n\t\t\ttestedBy: 'smtpConnectionTest',\n\t\t},\n\t],\n\twebhooks: sendAndWaitWebhooksDescription,\n\tproperties: [\n\t\t{\n\t\t\tdisplayName: 'Resource',\n\t\t\tname: 'resource',\n\t\t\ttype: 'hidden',\n\t\t\tnoDataExpression: true,\n\t\t\tdefault: 'email',\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tname: 'Email',\n\t\t\t\t\tvalue: 'email',\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tdisplayName: 'Operation',\n\t\t\tname: 'operation',\n\t\t\ttype: 'options',\n\t\t\tnoDataExpression: true,\n\t\t\tdefault: 'send',\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tname: 'Send',\n\t\t\t\t\tvalue: 'send',\n\t\t\t\t\taction: 'Send an Email',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Send and Wait for Response',\n\t\t\t\t\tvalue: SEND_AND_WAIT_OPERATION,\n\t\t\t\t\taction: 'Send message and wait for response',\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t...send.description,\n\t\t...sendAndWait.description,\n\t],\n};\n\nexport class EmailSendV2 implements INodeType {\n\tdescription: INodeTypeDescription;\n\n\tconstructor(baseDescription: INodeTypeBaseDescription) {\n\t\tthis.description = {\n\t\t\t...baseDescription,\n\t\t\t...versionDescription,\n\t\t};\n\t}\n\n\tmethods = {\n\t\tcredentialTest: { smtpConnectionTest },\n\t};\n\n\twebhook = sendAndWaitWebhook;\n\n\tasync execute(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n\t\tlet returnData: INodeExecutionData[][] = [];\n\t\tconst operation = this.getNodeParameter('operation', 0);\n\n\t\tif (operation === SEND_AND_WAIT_OPERATION) {\n\t\t\treturnData = await sendAndWait.execute.call(this);\n\t\t}\n\n\t\tif (operation === 'send') {\n\t\t\treturnData = await send.execute.call(this);\n\t\t}\n\n\t\treturn returnData;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,0BAA6D;AAE7D,WAAsB;AACtB,kBAA6B;AAC7B,mBAAmC;AACnC,0BAA+C;AAC/C,IAAAA,gBAAmC;AAE5B,MAAM,qBAA2C;AAAA,EACvD,aAAa;AAAA,EACb,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAO,CAAC,QAAQ;AAAA,EAChB,SAAS,CAAC,GAAG,GAAG;AAAA,EAChB,aAAa;AAAA,EACb,UAAU;AAAA,IACT,MAAM;AAAA,IACN,OAAO;AAAA,EACR;AAAA,EACA,QAAQ,CAAC,wCAAoB,IAAI;AAAA,EACjC,SAAS,CAAC,wCAAoB,IAAI;AAAA,EAClC,cAAc;AAAA,EACd,aAAa;AAAA,IACZ;AAAA,MACC,MAAM;AAAA,MACN,UAAU;AAAA,MACV,UAAU;AAAA,IACX;AAAA,EACD;AAAA,EACA,UAAU;AAAA,EACV,YAAY;AAAA,IACX;AAAA,MACC,aAAa;AAAA,MACb,MAAM;AAAA,MACN,MAAM;AAAA,MACN,kBAAkB;AAAA,MAClB,SAAS;AAAA,MACT,SAAS;AAAA,QACR;AAAA,UACC,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAAA,IACA;AAAA,MACC,aAAa;AAAA,MACb,MAAM;AAAA,MACN,MAAM;AAAA,MACN,kBAAkB;AAAA,MAClB,SAAS;AAAA,MACT,SAAS;AAAA,QACR;AAAA,UACC,MAAM;AAAA,UACN,OAAO;AAAA,UACP,QAAQ;AAAA,QACT;AAAA,QACA;AAAA,UACC,MAAM;AAAA,UACN,OAAO;AAAA,UACP,QAAQ;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAAA,IACA,GAAG,KAAK;AAAA,IACR,GAAG,YAAY;AAAA,EAChB;AACD;AAEO,MAAM,YAAiC;AAAA,EAG7C,YAAY,iBAA2C;AAOvD,mBAAU;AAAA,MACT,gBAAgB,EAAE,oDAAmB;AAAA,IACtC;AAEA,mBAAU;AAVT,SAAK,cAAc;AAAA,MAClB,GAAG;AAAA,MACH,GAAG;AAAA,IACJ;AAAA,EACD;AAAA,EAQA,MAAM,UAAkE;AACvE,QAAI,aAAqC,CAAC;AAC1C,UAAM,YAAY,KAAK,iBAAiB,aAAa,CAAC;AAEtD,QAAI,cAAc,6CAAyB;AAC1C,mBAAa,MAAM,YAAY,QAAQ,KAAK,IAAI;AAAA,IACjD;AAEA,QAAI,cAAc,QAAQ;AACzB,mBAAa,MAAM,KAAK,QAAQ,KAAK,IAAI;AAAA,IAC1C;AAEA,WAAO;AAAA,EACR;AACD;","names":["import_utils"]}