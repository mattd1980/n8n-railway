{"version":3,"sources":["../../../nodes/Dhl/GenericFunctions.ts"],"sourcesContent":["import type {\n\tICredentialDataDecryptedObject,\n\tICredentialTestFunctions,\n\tIDataObject,\n\tIExecuteFunctions,\n\tIHookFunctions,\n\tIHttpRequestMethods,\n\tILoadOptionsFunctions,\n\tIRequestOptions,\n\tJsonObject,\n} from 'n8n-workflow';\nimport { NodeApiError } from 'n8n-workflow';\n\nexport async function dhlApiRequest(\n\tthis: IHookFunctions | IExecuteFunctions | ILoadOptionsFunctions,\n\tmethod: IHttpRequestMethods,\n\tpath: string,\n\n\tbody: any = {},\n\tqs: IDataObject = {},\n\turi?: string,\n\toption: IDataObject = {},\n): Promise<any> {\n\tconst credentials = await this.getCredentials<{ apiKey: string }>('dhlApi');\n\n\tlet options: IRequestOptions = {\n\t\theaders: {\n\t\t\t'DHL-API-Key': credentials.apiKey,\n\t\t},\n\t\tmethod,\n\t\tqs,\n\t\tbody,\n\t\turi: uri || `https://api-eu.dhl.com${path}`,\n\t\tjson: true,\n\t};\n\toptions = Object.assign({}, options, option);\n\tif (Object.keys(options.body as IDataObject).length === 0) {\n\t\tdelete options.body;\n\t}\n\n\ttry {\n\t\treturn await this.helpers.request(options);\n\t} catch (error) {\n\t\tthrow new NodeApiError(this.getNode(), error as JsonObject);\n\t}\n}\n\nexport async function validateCredentials(\n\tthis: ICredentialTestFunctions,\n\tdecryptedCredentials: ICredentialDataDecryptedObject,\n): Promise<any> {\n\tconst credentials = decryptedCredentials;\n\n\tconst { apiKey } = credentials as {\n\t\tapiKey: string;\n\t};\n\n\tconst options: IRequestOptions = {\n\t\theaders: {\n\t\t\t'DHL-API-Key': apiKey,\n\t\t},\n\t\tqs: {\n\t\t\ttrackingNumber: 123,\n\t\t},\n\t\tmethod: 'GET',\n\t\turi: 'https://api-eu.dhl.com/track/shipments',\n\t\tjson: true,\n\t};\n\n\treturn await this.helpers.request(options);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,0BAA6B;AAE7B,eAAsB,cAErB,QACA,MAEA,OAAY,CAAC,GACb,KAAkB,CAAC,GACnB,KACA,SAAsB,CAAC,GACR;AACf,QAAM,cAAc,MAAM,KAAK,eAAmC,QAAQ;AAE1E,MAAI,UAA2B;AAAA,IAC9B,SAAS;AAAA,MACR,eAAe,YAAY;AAAA,IAC5B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,KAAK,OAAO,yBAAyB,IAAI;AAAA,IACzC,MAAM;AAAA,EACP;AACA,YAAU,OAAO,OAAO,CAAC,GAAG,SAAS,MAAM;AAC3C,MAAI,OAAO,KAAK,QAAQ,IAAmB,EAAE,WAAW,GAAG;AAC1D,WAAO,QAAQ;AAAA,EAChB;AAEA,MAAI;AACH,WAAO,MAAM,KAAK,QAAQ,QAAQ,OAAO;AAAA,EAC1C,SAAS,OAAO;AACf,UAAM,IAAI,iCAAa,KAAK,QAAQ,GAAG,KAAmB;AAAA,EAC3D;AACD;AAEA,eAAsB,oBAErB,sBACe;AACf,QAAM,cAAc;AAEpB,QAAM,EAAE,OAAO,IAAI;AAInB,QAAM,UAA2B;AAAA,IAChC,SAAS;AAAA,MACR,eAAe;AAAA,IAChB;AAAA,IACA,IAAI;AAAA,MACH,gBAAgB;AAAA,IACjB;AAAA,IACA,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,EACP;AAEA,SAAO,MAAM,KAAK,QAAQ,QAAQ,OAAO;AAC1C;","names":[]}