{"version":3,"sources":["../../../nodes/Twilio/GenericFunctions.ts"],"sourcesContent":["import type {\n\tIExecuteFunctions,\n\tIHookFunctions,\n\tIDataObject,\n\tIHttpRequestMethods,\n\tIRequestOptions,\n\tIHttpRequestOptions,\n\tILoadOptionsFunctions,\n} from 'n8n-workflow';\n\n/**\n * Make an API request to Twilio\n *\n */\nexport async function twilioApiRequest(\n\tthis: IHookFunctions | IExecuteFunctions,\n\tmethod: IHttpRequestMethods,\n\tendpoint: string,\n\tbody: IDataObject,\n\tquery?: IDataObject,\n): Promise<any> {\n\tconst credentials = await this.getCredentials<{\n\t\taccountSid: string;\n\t\tauthType: 'authToken' | 'apiKey';\n\t\tauthToken: string;\n\t\tapiKeySid: string;\n\t\tapiKeySecret: string;\n\t}>('twilioApi');\n\n\tif (query === undefined) {\n\t\tquery = {};\n\t}\n\n\tconst options: IRequestOptions = {\n\t\tmethod,\n\t\tform: body,\n\t\tqs: query,\n\t\turi: `https://api.twilio.com/2010-04-01/Accounts/${credentials.accountSid}${endpoint}`,\n\t\tjson: true,\n\t};\n\n\treturn await this.helpers.requestWithAuthentication.call(this, 'twilioApi', options);\n}\n\nexport async function twilioTriggerApiRequest(\n\tthis: IHookFunctions | IExecuteFunctions | ILoadOptionsFunctions,\n\tmethod: IHttpRequestMethods,\n\tendpoint: string,\n\tbody: FormData | IDataObject = {},\n): Promise<any> {\n\tconst options: IHttpRequestOptions = {\n\t\tmethod,\n\t\tbody,\n\t\theaders: {\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t},\n\t\turl: `https://events.twilio.com/v1/${endpoint}`,\n\t\tjson: true,\n\t};\n\treturn await this.helpers.requestWithAuthentication.call(this, 'twilioApi', options);\n}\n\nconst XML_CHAR_MAP: { [key: string]: string } = {\n\t'<': '&lt;',\n\t'>': '&gt;',\n\t'&': '&amp;',\n\t'\"': '&quot;',\n\t\"'\": '&apos;',\n};\n\nexport function escapeXml(str: string) {\n\treturn str.replace(/[<>&\"']/g, (ch: string) => {\n\t\treturn XML_CHAR_MAP[ch];\n\t});\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,eAAsB,iBAErB,QACA,UACA,MACA,OACe;AACf,QAAM,cAAc,MAAM,KAAK,eAM5B,WAAW;AAEd,MAAI,UAAU,QAAW;AACxB,YAAQ,CAAC;AAAA,EACV;AAEA,QAAM,UAA2B;AAAA,IAChC;AAAA,IACA,MAAM;AAAA,IACN,IAAI;AAAA,IACJ,KAAK,8CAA8C,YAAY,UAAU,GAAG,QAAQ;AAAA,IACpF,MAAM;AAAA,EACP;AAEA,SAAO,MAAM,KAAK,QAAQ,0BAA0B,KAAK,MAAM,aAAa,OAAO;AACpF;AAEA,eAAsB,wBAErB,QACA,UACA,OAA+B,CAAC,GACjB;AACf,QAAM,UAA+B;AAAA,IACpC;AAAA,IACA;AAAA,IACA,SAAS;AAAA,MACR,gBAAgB;AAAA,IACjB;AAAA,IACA,KAAK,gCAAgC,QAAQ;AAAA,IAC7C,MAAM;AAAA,EACP;AACA,SAAO,MAAM,KAAK,QAAQ,0BAA0B,KAAK,MAAM,aAAa,OAAO;AACpF;AAEA,MAAM,eAA0C;AAAA,EAC/C,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AACN;AAEO,SAAS,UAAU,KAAa;AACtC,SAAO,IAAI,QAAQ,YAAY,CAAC,OAAe;AAC9C,WAAO,aAAa,EAAE;AAAA,EACvB,CAAC;AACF;","names":[]}