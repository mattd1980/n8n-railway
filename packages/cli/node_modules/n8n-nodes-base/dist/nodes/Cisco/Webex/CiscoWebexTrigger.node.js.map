{"version":3,"sources":["../../../../nodes/Cisco/Webex/CiscoWebexTrigger.node.ts"],"sourcesContent":["import { createHmac } from 'crypto';\nimport type {\n\tIHookFunctions,\n\tIWebhookFunctions,\n\tIDataObject,\n\tINodeType,\n\tINodeTypeDescription,\n\tIWebhookResponseData,\n} from 'n8n-workflow';\nimport { NodeConnectionTypes } from 'n8n-workflow';\n\nimport {\n\tgetAutomaticSecret,\n\tgetEvents,\n\tmapResource,\n\twebexApiRequest,\n\twebexApiRequestAllItems,\n} from './GenericFunctions';\n\nexport class CiscoWebexTrigger implements INodeType {\n\tdescription: INodeTypeDescription = {\n\t\tdisplayName: 'Webex by Cisco Trigger',\n\t\tname: 'ciscoWebexTrigger',\n\t\t// eslint-disable-next-line n8n-nodes-base/node-class-description-icon-not-svg\n\t\ticon: 'file:ciscoWebex.png',\n\t\tgroup: ['trigger'],\n\t\tversion: 1,\n\t\tsubtitle: '={{$parameter[\"resource\"] + \":\" + $parameter[\"event\"]}}',\n\t\tdescription: 'Starts the workflow when Cisco Webex events occur.',\n\t\tdefaults: {\n\t\t\tname: 'Webex by Cisco Trigger',\n\t\t},\n\t\tinputs: [],\n\t\toutputs: [NodeConnectionTypes.Main],\n\t\tcredentials: [\n\t\t\t{\n\t\t\t\tname: 'ciscoWebexOAuth2Api',\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t],\n\t\twebhooks: [\n\t\t\t{\n\t\t\t\tname: 'default',\n\t\t\t\thttpMethod: 'POST',\n\t\t\t\tresponseMode: 'onReceived',\n\t\t\t\tpath: 'webhook',\n\t\t\t},\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tdisplayName: 'Resource',\n\t\t\t\tname: 'resource',\n\t\t\t\ttype: 'options',\n\t\t\t\tnoDataExpression: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '[All]',\n\t\t\t\t\t\tvalue: 'all',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Attachment Action',\n\t\t\t\t\t\tvalue: 'attachmentAction',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Meeting',\n\t\t\t\t\t\tvalue: 'meeting',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Membership',\n\t\t\t\t\t\tvalue: 'membership',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Message',\n\t\t\t\t\t\tvalue: 'message',\n\t\t\t\t\t},\n\t\t\t\t\t// {\n\t\t\t\t\t// \tname: 'Telephony Call',\n\t\t\t\t\t// \tvalue: 'telephonyCall',\n\t\t\t\t\t// },\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Recording',\n\t\t\t\t\t\tvalue: 'recording',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Room',\n\t\t\t\t\t\tvalue: 'room',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: 'meeting',\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t\t...getEvents(),\n\t\t\t{\n\t\t\t\tdisplayName: 'Resolve Data',\n\t\t\t\tname: 'resolveData',\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdisplayOptions: {\n\t\t\t\t\tshow: {\n\t\t\t\t\t\tresource: ['attachmentAction'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: true,\n\t\t\t\t// eslint-disable-next-line n8n-nodes-base/node-param-description-boolean-without-whether\n\t\t\t\tdescription:\n\t\t\t\t\t'By default the response only contain a reference to the data the user inputed. If this option gets activated, it will resolve the data automatically.',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Filters',\n\t\t\t\tname: 'filters',\n\t\t\t\ttype: 'collection',\n\t\t\t\tplaceholder: 'Add Filter',\n\t\t\t\tdefault: {},\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Has Files',\n\t\t\t\t\t\tname: 'hasFiles',\n\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['message'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: false,\n\t\t\t\t\t\tdescription: 'Whether to limit to messages which contain file content attachments',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Is Locked',\n\t\t\t\t\t\tname: 'isLocked',\n\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['room'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'updated'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: false,\n\t\t\t\t\t\tdescription: 'Whether to limit to rooms that are locked',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Is Moderator',\n\t\t\t\t\t\tname: 'isModerator',\n\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['membership'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'updated', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: false,\n\t\t\t\t\t\tdescription: 'Whether to limit to moderators of a room',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Mentioned People',\n\t\t\t\t\t\tname: 'mentionedPeople',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['message'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t'Limit to messages which contain these mentioned people, by person ID; accepts me as a shorthand for your own person ID; separate multiple values with commas',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Message ID',\n\t\t\t\t\t\tname: 'messageId',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['attachmentAction'],\n\t\t\t\t\t\t\t\t'/event': ['created'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular message, by ID',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Owned By',\n\t\t\t\t\t\tname: 'ownedBy',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['meeting'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Person Email',\n\t\t\t\t\t\tname: 'personEmail',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['membership'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'updated', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular person, by email',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Person Email',\n\t\t\t\t\t\tname: 'personEmail',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['message'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular person, by email',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Person ID',\n\t\t\t\t\t\tname: 'personId',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['attachmentAction'],\n\t\t\t\t\t\t\t\t'/event': ['created'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular person, by ID',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Person ID',\n\t\t\t\t\t\tname: 'personId',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['membership'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'updated', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular person, by ID',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Person ID',\n\t\t\t\t\t\tname: 'personId',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['message'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular person, by ID',\n\t\t\t\t\t},\n\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Room ID',\n\t\t\t\t\t\tname: 'roomId',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['attachmentAction'],\n\t\t\t\t\t\t\t\t'/event': ['created'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular room, by ID',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Room ID',\n\t\t\t\t\t\tname: 'roomId',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['membership'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'updated', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular room, by ID',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Room ID',\n\t\t\t\t\t\tname: 'roomId',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['message'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'updated'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular room, by ID',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Room Type',\n\t\t\t\t\t\tname: 'roomType',\n\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Direct',\n\t\t\t\t\t\t\t\tvalue: 'direct',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Group',\n\t\t\t\t\t\t\t\tvalue: 'group',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['message'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'deleted'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular room type',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Type',\n\t\t\t\t\t\tname: 'type',\n\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Direct',\n\t\t\t\t\t\t\t\tvalue: 'direct',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Group',\n\t\t\t\t\t\t\t\tvalue: 'group',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdisplayOptions: {\n\t\t\t\t\t\t\tshow: {\n\t\t\t\t\t\t\t\t'/resource': ['room'],\n\t\t\t\t\t\t\t\t'/event': ['created', 'updated'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdescription: 'Limit to a particular room type',\n\t\t\t\t\t},\n\t\t\t\t\t// {\n\t\t\t\t\t// \tdisplayName: 'Call Type',\n\t\t\t\t\t// \tname: 'callType',\n\t\t\t\t\t// \ttype: 'options',\n\t\t\t\t\t// \toptions: [\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Emergency',\n\t\t\t\t\t// \t\t\tvalue: 'emergency',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'External',\n\t\t\t\t\t// \t\t\tvalue: 'external',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Location',\n\t\t\t\t\t// \t\t\tvalue: 'location',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Disconnected',\n\t\t\t\t\t// \t\t\tvalue: 'disconnected',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Organization',\n\t\t\t\t\t// \t\t\tvalue: 'organization',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Other',\n\t\t\t\t\t// \t\t\tvalue: 'other',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Repair',\n\t\t\t\t\t// \t\t\tvalue: 'repair',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t],\n\t\t\t\t\t// \tdisplayOptions: {\n\t\t\t\t\t// \t\tshow: {\n\t\t\t\t\t// \t\t\t'/resource': [\n\t\t\t\t\t// \t\t\t\t'telephonyCall',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t\t'/event': [\n\t\t\t\t\t// \t\t\t\t'created',\n\t\t\t\t\t// \t\t\t\t'deleted',\n\t\t\t\t\t// \t\t\t\t'updated',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tdefault: '',\n\t\t\t\t\t// \tdescription: `Limit to a particular call type`,\n\t\t\t\t\t// },\n\t\t\t\t\t// {\n\t\t\t\t\t// \tdisplayName: 'Person ID',\n\t\t\t\t\t// \tname: 'personId',\n\t\t\t\t\t// \ttype: 'string',\n\t\t\t\t\t// \tdisplayOptions: {\n\t\t\t\t\t// \t\tshow: {\n\t\t\t\t\t// \t\t\t'/resource': [\n\t\t\t\t\t// \t\t\t\t'telephonyCall',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t\t'/event': [\n\t\t\t\t\t// \t\t\t\t'created',\n\t\t\t\t\t// \t\t\t\t'deleted',\n\t\t\t\t\t// \t\t\t\t'updated',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tdefault: '',\n\t\t\t\t\t// \tdescription: 'Limit to a particular person, by ID',\n\t\t\t\t\t// },\n\t\t\t\t\t// {\n\t\t\t\t\t// \tdisplayName: 'Personality',\n\t\t\t\t\t// \tname: 'personality',\n\t\t\t\t\t// \ttype: 'options',\n\t\t\t\t\t// \toptions: [\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Click To Dial',\n\t\t\t\t\t// \t\t\tvalue: 'clickToDial',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Originator',\n\t\t\t\t\t// \t\t\tvalue: 'originator',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Terminator',\n\t\t\t\t\t// \t\t\tvalue: 'terminator',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t],\n\t\t\t\t\t// \tdisplayOptions: {\n\t\t\t\t\t// \t\tshow: {\n\t\t\t\t\t// \t\t\t'/resource': [\n\t\t\t\t\t// \t\t\t\t'telephonyCall',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t\t'/event': [\n\t\t\t\t\t// \t\t\t\t'created',\n\t\t\t\t\t// \t\t\t\t'deleted',\n\t\t\t\t\t// \t\t\t\t'updated',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tdefault: '',\n\t\t\t\t\t// \tdescription: `Limit to a particular call personality`,\n\t\t\t\t\t// },\n\t\t\t\t\t// {\n\t\t\t\t\t// \tdisplayName: 'State',\n\t\t\t\t\t// \tname: 'state',\n\t\t\t\t\t// \ttype: 'options',\n\t\t\t\t\t// \toptions: [\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Alerting',\n\t\t\t\t\t// \t\t\tvalue: 'alerting',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Connected',\n\t\t\t\t\t// \t\t\tvalue: 'connected',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Connecting',\n\t\t\t\t\t// \t\t\tvalue: 'connecting',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Disconnected',\n\t\t\t\t\t// \t\t\tvalue: 'disconnected',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Held',\n\t\t\t\t\t// \t\t\tvalue: 'held',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tname: 'Remote Held',\n\t\t\t\t\t// \t\t\tvalue: 'remoteHeld',\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t],\n\t\t\t\t\t// \tdisplayOptions: {\n\t\t\t\t\t// \t\tshow: {\n\t\t\t\t\t// \t\t\t'/resource': [\n\t\t\t\t\t// \t\t\t\t'telephonyCall',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t\t'/event': [\n\t\t\t\t\t// \t\t\t\t'created',\n\t\t\t\t\t// \t\t\t\t'deleted',\n\t\t\t\t\t// \t\t\t\t'updated',\n\t\t\t\t\t// \t\t\t],\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tdefault: '',\n\t\t\t\t\t// \tdescription: `Limit to a particular call state`,\n\t\t\t\t\t// },\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t};\n\n\twebhookMethods = {\n\t\tdefault: {\n\t\t\tasync checkExists(this: IHookFunctions): Promise<boolean> {\n\t\t\t\tconst webhookUrl = this.getNodeWebhookUrl('default');\n\t\t\t\tconst webhookData = this.getWorkflowStaticData('node');\n\t\t\t\tconst resource = this.getNodeParameter('resource') as string;\n\t\t\t\tconst event = this.getNodeParameter('event') as string;\n\n\t\t\t\t// Check all the webhooks which exist already if it is identical to the\n\t\t\t\t// one that is supposed to get created.\n\t\t\t\tconst data = await webexApiRequestAllItems.call(this, 'items', 'GET', '/webhooks');\n\t\t\t\tfor (const webhook of data) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twebhook.url === webhookUrl &&\n\t\t\t\t\t\twebhook.resource === mapResource(resource) &&\n\t\t\t\t\t\twebhook.event === event &&\n\t\t\t\t\t\twebhook.status === 'active'\n\t\t\t\t\t) {\n\t\t\t\t\t\twebhookData.webhookId = webhook.id as string;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tasync create(this: IHookFunctions): Promise<boolean> {\n\t\t\t\tconst webhookData = this.getWorkflowStaticData('node');\n\t\t\t\tconst webhookUrl = this.getNodeWebhookUrl('default');\n\t\t\t\tconst event = this.getNodeParameter('event') as string;\n\t\t\t\tconst resource = this.getNodeParameter('resource') as string;\n\t\t\t\tconst filters = this.getNodeParameter('filters', {}) as IDataObject;\n\t\t\t\tconst credentials = await this.getCredentials('ciscoWebexOAuth2Api');\n\t\t\t\tconst secret = getAutomaticSecret(credentials);\n\t\t\t\tconst filter = [];\n\t\t\t\tfor (const key of Object.keys(filters)) {\n\t\t\t\t\tif (key !== 'ownedBy') {\n\t\t\t\t\t\tfilter.push(`${key}=${filters[key]}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst endpoint = '/webhooks';\n\n\t\t\t\tconst body: IDataObject = {\n\t\t\t\t\tname: `n8n-webhook:${webhookUrl}`,\n\t\t\t\t\ttargetUrl: webhookUrl,\n\t\t\t\t\tevent,\n\t\t\t\t\tresource: mapResource(resource),\n\t\t\t\t};\n\n\t\t\t\tif (filters.ownedBy) {\n\t\t\t\t\tbody.ownedBy = filters.ownedBy as string;\n\t\t\t\t}\n\n\t\t\t\tbody.secret = secret;\n\n\t\t\t\tif (filter.length) {\n\t\t\t\t\tbody.filter = filter.join('&');\n\t\t\t\t}\n\n\t\t\t\tconst responseData = await webexApiRequest.call(this, 'POST', endpoint, body);\n\t\t\t\tif (responseData.id === undefined) {\n\t\t\t\t\t// Required data is missing so was not successful\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\twebhookData.webhookId = responseData.id as string;\n\t\t\t\twebhookData.secret = secret;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tasync delete(this: IHookFunctions): Promise<boolean> {\n\t\t\t\tconst webhookData = this.getWorkflowStaticData('node');\n\t\t\t\tif (webhookData.webhookId !== undefined) {\n\t\t\t\t\tconst endpoint = `/webhooks/${webhookData.webhookId}`;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait webexApiRequest.call(this, 'DELETE', endpoint);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove from the static workflow data so that it is clear\n\t\t\t\t\t// that no webhooks are registered anymore\n\t\t\t\t\tdelete webhookData.webhookId;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t},\n\t};\n\n\tasync webhook(this: IWebhookFunctions): Promise<IWebhookResponseData> {\n\t\tlet bodyData = this.getBodyData();\n\t\tconst webhookData = this.getWorkflowStaticData('node');\n\t\tconst headers = this.getHeaderData() as IDataObject;\n\t\tconst req = this.getRequestObject();\n\t\tconst resolveData = this.getNodeParameter('resolveData', false) as boolean;\n\n\t\t//@ts-ignore\n\t\tconst computedSignature = createHmac('sha1', webhookData.secret)\n\t\t\t.update(req.rawBody)\n\t\t\t.digest('hex');\n\t\tif (headers['x-spark-signature'] !== computedSignature) {\n\t\t\treturn {};\n\t\t}\n\n\t\tif (resolveData) {\n\t\t\tconst {\n\t\t\t\tdata: { id },\n\t\t\t} = bodyData as { data: { id: string } };\n\t\t\tbodyData = await webexApiRequest.call(this, 'GET', `/attachment/actions/${id}`);\n\t\t}\n\n\t\treturn {\n\t\t\tworkflowData: [this.helpers.returnJsonArray(bodyData)],\n\t\t};\n\t}\n}\n"],"mappings":"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","names":[]}