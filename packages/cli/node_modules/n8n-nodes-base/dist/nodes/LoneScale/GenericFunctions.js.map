{"version":3,"sources":["../../../nodes/LoneScale/GenericFunctions.ts"],"sourcesContent":["import {\n\tApplicationError,\n\ttype IHttpRequestMethods,\n\ttype IDataObject,\n\ttype IExecuteFunctions,\n\ttype IHookFunctions,\n\ttype ILoadOptionsFunctions,\n\ttype IWebhookFunctions,\n\ttype IRequestOptions,\n} from 'n8n-workflow';\n\nimport { BASE_URL } from './constants';\n\nexport async function lonescaleApiRequest(\n\tthis: IExecuteFunctions | IWebhookFunctions | IHookFunctions | ILoadOptionsFunctions,\n\tmethod: IHttpRequestMethods,\n\tresource: string,\n\tbody: IDataObject = {},\n\tquery: IDataObject = {},\n\turi?: string,\n) {\n\tconst endpoint = `${BASE_URL}`;\n\tconst credentials = await this.getCredentials('loneScaleApi');\n\tconst options: IRequestOptions = {\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'X-API-KEY': credentials?.apiKey,\n\t\t},\n\t\tmethod,\n\t\tbody,\n\t\tqs: query,\n\t\turi: uri || `${endpoint}${resource}`,\n\t\tjson: true,\n\t};\n\tif (!Object.keys(body).length) {\n\t\tdelete options.body;\n\t}\n\tif (!Object.keys(query).length) {\n\t\tdelete options.qs;\n\t}\n\n\ttry {\n\t\treturn await this.helpers.requestWithAuthentication.call(this, 'loneScaleApi', options);\n\t} catch (error) {\n\t\tif (error.response) {\n\t\t\tconst errorMessage =\n\t\t\t\terror.response.body.message || error.response.body.description || error.message;\n\t\t\tthrow new ApplicationError(\n\t\t\t\t`Autopilot error response [${error.statusCode}]: ${errorMessage}`,\n\t\t\t\t{ level: 'warning' },\n\t\t\t);\n\t\t}\n\t\tthrow error;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BASO;AAEP,uBAAyB;AAEzB,eAAsB,oBAErB,QACA,UACA,OAAoB,CAAC,GACrB,QAAqB,CAAC,GACtB,KACC;AACD,QAAM,WAAW,GAAG,yBAAQ;AAC5B,QAAM,cAAc,MAAM,KAAK,eAAe,cAAc;AAC5D,QAAM,UAA2B;AAAA,IAChC,SAAS;AAAA,MACR,gBAAgB;AAAA,MAChB,aAAa,aAAa;AAAA,IAC3B;AAAA,IACA;AAAA,IACA;AAAA,IACA,IAAI;AAAA,IACJ,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ;AAAA,IAClC,MAAM;AAAA,EACP;AACA,MAAI,CAAC,OAAO,KAAK,IAAI,EAAE,QAAQ;AAC9B,WAAO,QAAQ;AAAA,EAChB;AACA,MAAI,CAAC,OAAO,KAAK,KAAK,EAAE,QAAQ;AAC/B,WAAO,QAAQ;AAAA,EAChB;AAEA,MAAI;AACH,WAAO,MAAM,KAAK,QAAQ,0BAA0B,KAAK,MAAM,gBAAgB,OAAO;AAAA,EACvF,SAAS,OAAO;AACf,QAAI,MAAM,UAAU;AACnB,YAAM,eACL,MAAM,SAAS,KAAK,WAAW,MAAM,SAAS,KAAK,eAAe,MAAM;AACzE,YAAM,IAAI;AAAA,QACT,6BAA6B,MAAM,UAAU,MAAM,YAAY;AAAA,QAC/D,EAAE,OAAO,UAAU;AAAA,MACpB;AAAA,IACD;AACA,UAAM;AAAA,EACP;AACD;","names":[]}