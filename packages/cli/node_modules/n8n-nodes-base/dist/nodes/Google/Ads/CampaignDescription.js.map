{"version":3,"sources":["../../../../nodes/Google/Ads/CampaignDescription.ts"],"sourcesContent":["import type {\n\tIDataObject,\n\tIExecuteSingleFunctions,\n\tIN8nHttpFullResponse,\n\tINodeExecutionData,\n\tINodeProperties,\n} from 'n8n-workflow';\n\nasync function processCampaignSearchResponse(\n\tthis: IExecuteSingleFunctions,\n\t_inputData: INodeExecutionData[],\n\tresponseData: IN8nHttpFullResponse,\n): Promise<INodeExecutionData[]> {\n\tconst results = (responseData.body as IDataObject).results as GoogleAdsCampaignElement;\n\n\treturn results.map((result) => ({\n\t\tjson: {\n\t\t\t...result.campaign,\n\t\t\t...result.metrics,\n\t\t\t...result.campaignBudget,\n\t\t},\n\t}));\n}\n\nexport const campaignOperations: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Operation',\n\t\tname: 'operation',\n\t\ttype: 'options',\n\t\tnoDataExpression: true,\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['campaign'],\n\t\t\t},\n\t\t},\n\t\toptions: [\n\t\t\t{\n\t\t\t\tname: 'Get Many',\n\t\t\t\tvalue: 'getAll',\n\t\t\t\tdescription: 'Get many campaigns linked to the specified account',\n\t\t\t\trouting: {\n\t\t\t\t\trequest: {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\turl: '={{\"/v17/customers/\" + $parameter[\"clientCustomerId\"].toString().replace(/-/g, \"\")  + \"/googleAds:search\"}}',\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\tquery:\n\t\t\t\t\t\t\t\t'={{ \"' +\n\t\t\t\t\t\t\t\t'select ' +\n\t\t\t\t\t\t\t\t'campaign.id, ' +\n\t\t\t\t\t\t\t\t'campaign.name, ' +\n\t\t\t\t\t\t\t\t'campaign_budget.amount_micros, ' +\n\t\t\t\t\t\t\t\t'campaign_budget.period,' +\n\t\t\t\t\t\t\t\t'campaign.status,' +\n\t\t\t\t\t\t\t\t'campaign.optimization_score,' +\n\t\t\t\t\t\t\t\t'campaign.advertising_channel_type,' +\n\t\t\t\t\t\t\t\t'campaign.advertising_channel_sub_type,' +\n\t\t\t\t\t\t\t\t'metrics.impressions,' +\n\t\t\t\t\t\t\t\t'metrics.interactions,' +\n\t\t\t\t\t\t\t\t'metrics.interaction_rate,' +\n\t\t\t\t\t\t\t\t'metrics.average_cost,' +\n\t\t\t\t\t\t\t\t'metrics.cost_micros,' +\n\t\t\t\t\t\t\t\t'metrics.conversions,' +\n\t\t\t\t\t\t\t\t'metrics.cost_per_conversion,' +\n\t\t\t\t\t\t\t\t'metrics.conversions_from_interactions_rate,' +\n\t\t\t\t\t\t\t\t'metrics.video_views,' +\n\t\t\t\t\t\t\t\t'metrics.average_cpm,' +\n\t\t\t\t\t\t\t\t'metrics.ctr ' +\n\t\t\t\t\t\t\t\t'from campaign ' +\n\t\t\t\t\t\t\t\t'where campaign.id > 0 ' + // create a dummy where clause so we can append more conditions\n\t\t\t\t\t\t\t\t'\" + ([\"allTime\", undefined, \"\"].includes($parameter.additionalOptions?.dateRange) ? \"\" : \" and segments.date DURING \" + $parameter.additionalOptions.dateRange) + \" ' +\n\t\t\t\t\t\t\t\t'\" + ([\"all\", undefined, \"\"].includes($parameter.additionalOptions?.campaignStatus) ? \"\" : \" and campaign.status = \\'\" + $parameter.additionalOptions.campaignStatus + \"\\'\") + \"' +\n\t\t\t\t\t\t\t\t'\" }}',\n\t\t\t\t\t\t},\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'login-customer-id':\n\t\t\t\t\t\t\t\t'={{$parameter[\"managerCustomerId\"].toString().replace(/-/g, \"\")}}',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\toutput: {\n\t\t\t\t\t\tpostReceive: [processCampaignSearchResponse],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: 'Get many campaigns',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Get',\n\t\t\t\tvalue: 'get',\n\t\t\t\tdescription: 'Get a specific campaign',\n\t\t\t\trouting: {\n\t\t\t\t\trequest: {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\turl: '={{\"/v17/customers/\" + $parameter[\"clientCustomerId\"].toString().replace(/-/g, \"\") + \"/googleAds:search\"}}',\n\t\t\t\t\t\treturnFullResponse: true,\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\tquery:\n\t\t\t\t\t\t\t\t'={{ \"' +\n\t\t\t\t\t\t\t\t'select ' +\n\t\t\t\t\t\t\t\t'campaign.id, ' +\n\t\t\t\t\t\t\t\t'campaign.name, ' +\n\t\t\t\t\t\t\t\t'campaign_budget.amount_micros, ' +\n\t\t\t\t\t\t\t\t'campaign_budget.period,' +\n\t\t\t\t\t\t\t\t'campaign.status,' +\n\t\t\t\t\t\t\t\t'campaign.optimization_score,' +\n\t\t\t\t\t\t\t\t'campaign.advertising_channel_type,' +\n\t\t\t\t\t\t\t\t'campaign.advertising_channel_sub_type,' +\n\t\t\t\t\t\t\t\t'metrics.impressions,' +\n\t\t\t\t\t\t\t\t'metrics.interactions,' +\n\t\t\t\t\t\t\t\t'metrics.interaction_rate,' +\n\t\t\t\t\t\t\t\t'metrics.average_cost,' +\n\t\t\t\t\t\t\t\t'metrics.cost_micros,' +\n\t\t\t\t\t\t\t\t'metrics.conversions,' +\n\t\t\t\t\t\t\t\t'metrics.cost_per_conversion,' +\n\t\t\t\t\t\t\t\t'metrics.conversions_from_interactions_rate,' +\n\t\t\t\t\t\t\t\t'metrics.video_views,' +\n\t\t\t\t\t\t\t\t'metrics.average_cpm,' +\n\t\t\t\t\t\t\t\t'metrics.ctr ' +\n\t\t\t\t\t\t\t\t'from campaign ' +\n\t\t\t\t\t\t\t\t'where campaign.id = \" + $parameter[\"campaignId\"].toString().replace(/-/g, \"\")' +\n\t\t\t\t\t\t\t\t'}}',\n\t\t\t\t\t\t},\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'login-customer-id':\n\t\t\t\t\t\t\t\t'={{$parameter[\"managerCustomerId\"].toString().replace(/-/g, \"\")}}',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\toutput: {\n\t\t\t\t\t\tpostReceive: [processCampaignSearchResponse],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: 'Get a campaign',\n\t\t\t},\n\t\t],\n\t\tdefault: 'getAll',\n\t},\n];\n\nexport const campaignFields: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Manager Customer ID',\n\t\tname: 'managerCustomerId',\n\t\ttype: 'string',\n\t\trequired: true,\n\t\tplaceholder: '9998887777',\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['campaign'],\n\t\t\t},\n\t\t},\n\t\tdefault: '',\n\t},\n\t{\n\t\tdisplayName: 'Client Customer ID',\n\t\tname: 'clientCustomerId',\n\t\ttype: 'string',\n\t\trequired: true,\n\t\tplaceholder: '6665554444',\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['campaign'],\n\t\t\t},\n\t\t},\n\t\tdefault: '',\n\t},\n\t{\n\t\tdisplayName: 'Campaign ID',\n\t\tname: 'campaignId',\n\t\ttype: 'string',\n\t\trequired: true,\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\toperation: ['get'],\n\t\t\t\tresource: ['campaign'],\n\t\t\t},\n\t\t},\n\t\tdefault: '',\n\t\tdescription: 'ID of the campaign',\n\t},\n\t{\n\t\tdisplayName: 'Additional Options',\n\t\tname: 'additionalOptions',\n\t\ttype: 'collection',\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['campaign'],\n\t\t\t\toperation: ['getAll'],\n\t\t\t},\n\t\t},\n\t\tdefault: {},\n\t\tdescription: 'Additional options for fetching campaigns',\n\t\tplaceholder: 'Add option',\n\t\toptions: [\n\t\t\t{\n\t\t\t\tdisplayName: 'Date Range',\n\t\t\t\tname: 'dateRange',\n\t\t\t\tdescription: 'Filters statistics by period',\n\t\t\t\ttype: 'options',\n\t\t\t\t// eslint-disable-next-line n8n-nodes-base/node-param-options-type-unsorted-items\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'All Time',\n\t\t\t\t\t\tvalue: 'allTime',\n\t\t\t\t\t\tdescription: 'Fetch statistics for all period',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Today',\n\t\t\t\t\t\tvalue: 'TODAY',\n\t\t\t\t\t\tdescription: 'Today only',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Yesterday',\n\t\t\t\t\t\tvalue: 'YESTERDAY',\n\t\t\t\t\t\tdescription: 'Yesterday only',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Last 7 Days',\n\t\t\t\t\t\tvalue: 'LAST_7_DAYS',\n\t\t\t\t\t\tdescription: 'Last 7 days, not including today',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Last Business Week',\n\t\t\t\t\t\tvalue: 'LAST_BUSINESS_WEEK',\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t'The 5 day business week, Monday through Friday, of the previous business week',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'This Month',\n\t\t\t\t\t\tvalue: 'THIS_MONTH',\n\t\t\t\t\t\tdescription: 'All days in the current month',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Last Month',\n\t\t\t\t\t\tvalue: 'LAST_MONTH',\n\t\t\t\t\t\tdescription: 'All days in the previous month',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Last 14 Days',\n\t\t\t\t\t\tvalue: 'LAST_14_DAYS',\n\t\t\t\t\t\tdescription: 'The last 14 days not including today',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Last 30 Days',\n\t\t\t\t\t\tvalue: 'LAST_30_DAYS',\n\t\t\t\t\t\tdescription: 'The last 30 days not including today',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: 'allTime',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Show Campaigns by Status',\n\t\t\t\tname: 'campaignStatus',\n\t\t\t\tdescription: 'Filters campaigns by status',\n\t\t\t\ttype: 'options',\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'All',\n\t\t\t\t\t\tvalue: 'all',\n\t\t\t\t\t\tdescription: 'Fetch all campaigns regardless of status',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Enabled',\n\t\t\t\t\t\tvalue: 'ENABLED',\n\t\t\t\t\t\tdescription: 'Filter only active campaigns',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Paused',\n\t\t\t\t\t\tvalue: 'PAUSED',\n\t\t\t\t\t\tdescription: 'Filter only paused campaigns',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Removed',\n\t\t\t\t\t\tvalue: 'REMOVED',\n\t\t\t\t\t\tdescription: 'Filter only removed campaigns',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: 'all',\n\t\t\t},\n\t\t],\n\t},\n];\n\ntype GoogleAdsCampaignElement = [\n\t{\n\t\tcampaign: object;\n\t\tmetrics: object;\n\t\tcampaignBudget: object;\n\t},\n];\n"],"mappings":"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","names":[]}