{"version":3,"sources":["../../../../../../../nodes/Google/Sheet/v2/actions/spreadsheet/delete.operation.ts"],"sourcesContent":["import type { IExecuteFunctions, INodeExecutionData } from 'n8n-workflow';\n\nimport { wrapData } from '../../../../../../utils/utilities';\nimport { GOOGLE_DRIVE_FILE_URL_REGEX } from '../../../../constants';\nimport type { SpreadSheetProperties } from '../../helpers/GoogleSheets.types';\nimport { apiRequest } from '../../transport';\n\nexport const description: SpreadSheetProperties = [\n\t{\n\t\tdisplayName: 'Document',\n\t\tname: 'documentId',\n\t\ttype: 'resourceLocator',\n\t\tdefault: { mode: 'list', value: '' },\n\t\trequired: true,\n\t\tmodes: [\n\t\t\t{\n\t\t\t\tdisplayName: 'From List',\n\t\t\t\tname: 'list',\n\t\t\t\ttype: 'list',\n\t\t\t\ttypeOptions: {\n\t\t\t\t\tsearchListMethod: 'spreadSheetsSearch',\n\t\t\t\t\tsearchable: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'By URL',\n\t\t\t\tname: 'url',\n\t\t\t\ttype: 'string',\n\t\t\t\textractValue: {\n\t\t\t\t\ttype: 'regex',\n\t\t\t\t\tregex: GOOGLE_DRIVE_FILE_URL_REGEX,\n\t\t\t\t},\n\t\t\t\tvalidation: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'regex',\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tregex: GOOGLE_DRIVE_FILE_URL_REGEX,\n\t\t\t\t\t\t\terrorMessage: 'Not a valid Google Drive File URL',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'By ID',\n\t\t\t\tname: 'id',\n\t\t\t\ttype: 'string',\n\t\t\t\tvalidation: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'regex',\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tregex: '[a-zA-Z0-9\\\\-_]{2,}',\n\t\t\t\t\t\t\terrorMessage: 'Not a valid Google Drive File ID',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\turl: '=https://docs.google.com/spreadsheets/d/{{$value}}/edit',\n\t\t\t},\n\t\t],\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['spreadsheet'],\n\t\t\t\toperation: ['deleteSpreadsheet'],\n\t\t\t},\n\t\t},\n\t},\n];\n\nexport async function execute(this: IExecuteFunctions): Promise<INodeExecutionData[]> {\n\tconst items = this.getInputData();\n\tconst returnData: INodeExecutionData[] = [];\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst documentId = this.getNodeParameter('documentId', i, undefined, {\n\t\t\textractValue: true,\n\t\t}) as string;\n\n\t\tawait apiRequest.call(\n\t\t\tthis,\n\t\t\t'DELETE',\n\t\t\t'',\n\t\t\t{},\n\t\t\t{},\n\t\t\t`https://www.googleapis.com/drive/v3/files/${documentId}`,\n\t\t);\n\n\t\tconst executionData = this.helpers.constructExecutionMetaData(wrapData({ success: true }), {\n\t\t\titemData: { item: i },\n\t\t});\n\n\t\treturnData.push(...executionData);\n\t}\n\n\treturn returnData;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,uBAAyB;AACzB,uBAA4C;AAE5C,uBAA2B;AAEpB,MAAM,cAAqC;AAAA,EACjD;AAAA,IACC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS,EAAE,MAAM,QAAQ,OAAO,GAAG;AAAA,IACnC,UAAU;AAAA,IACV,OAAO;AAAA,MACN;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,MAAM;AAAA,QACN,aAAa;AAAA,UACZ,kBAAkB;AAAA,UAClB,YAAY;AAAA,QACb;AAAA,MACD;AAAA,MACA;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,MAAM;AAAA,QACN,cAAc;AAAA,UACb,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,QACA,YAAY;AAAA,UACX;AAAA,YACC,MAAM;AAAA,YACN,YAAY;AAAA,cACX,OAAO;AAAA,cACP,cAAc;AAAA,YACf;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,MACA;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,MAAM;AAAA,QACN,YAAY;AAAA,UACX;AAAA,YACC,MAAM;AAAA,YACN,YAAY;AAAA,cACX,OAAO;AAAA,cACP,cAAc;AAAA,YACf;AAAA,UACD;AAAA,QACD;AAAA,QACA,KAAK;AAAA,MACN;AAAA,IACD;AAAA,IACA,gBAAgB;AAAA,MACf,MAAM;AAAA,QACL,UAAU,CAAC,aAAa;AAAA,QACxB,WAAW,CAAC,mBAAmB;AAAA,MAChC;AAAA,IACD;AAAA,EACD;AACD;AAEA,eAAsB,UAAgE;AACrF,QAAM,QAAQ,KAAK,aAAa;AAChC,QAAM,aAAmC,CAAC;AAE1C,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,UAAM,aAAa,KAAK,iBAAiB,cAAc,GAAG,QAAW;AAAA,MACpE,cAAc;AAAA,IACf,CAAC;AAED,UAAM,4BAAW;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,MACA,CAAC;AAAA,MACD,CAAC;AAAA,MACD,6CAA6C,UAAU;AAAA,IACxD;AAEA,UAAM,gBAAgB,KAAK,QAAQ,+BAA2B,2BAAS,EAAE,SAAS,KAAK,CAAC,GAAG;AAAA,MAC1F,UAAU,EAAE,MAAM,EAAE;AAAA,IACrB,CAAC;AAED,eAAW,KAAK,GAAG,aAAa;AAAA,EACjC;AAEA,SAAO;AACR;","names":[]}