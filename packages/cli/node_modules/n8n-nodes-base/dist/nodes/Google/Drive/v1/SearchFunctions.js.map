{"version":3,"sources":["../../../../../nodes/Google/Drive/v1/SearchFunctions.ts"],"sourcesContent":["import type { ILoadOptionsFunctions, INodeListSearchResult } from 'n8n-workflow';\n\nimport { googleApiRequest } from './GenericFunctions';\n\ninterface GoogleDriveFilesItem {\n\tid: string;\n\tname: string;\n\tmimeType: string;\n\twebViewLink: string;\n}\n\ninterface GoogleDriveDriveItem {\n\tid: string;\n\tname: string;\n}\n\nexport async function fileSearch(\n\tthis: ILoadOptionsFunctions,\n\tfilter?: string,\n\tpaginationToken?: string,\n): Promise<INodeListSearchResult> {\n\tconst query: string[] = [];\n\tif (filter) {\n\t\tquery.push(`name contains '${filter.replace(\"'\", \"\\\\'\")}'`);\n\t}\n\tquery.push(\"mimeType != 'application/vnd.google-apps.folder'\");\n\tconst res = await googleApiRequest.call(this, 'GET', '/drive/v3/files', undefined, {\n\t\tq: query.join(' and '),\n\t\tpageToken: paginationToken,\n\t\tfields: 'nextPageToken,files(id,name,mimeType,webViewLink)',\n\t\torderBy: 'name_natural',\n\t});\n\treturn {\n\t\tresults: res.files.map((i: GoogleDriveFilesItem) => ({\n\t\t\tname: i.name,\n\t\t\tvalue: i.id,\n\t\t\turl: i.webViewLink,\n\t\t})),\n\t\tpaginationToken: res.nextPageToken,\n\t};\n}\n\nexport async function folderSearch(\n\tthis: ILoadOptionsFunctions,\n\tfilter?: string,\n\tpaginationToken?: string,\n): Promise<INodeListSearchResult> {\n\tconst query: string[] = [];\n\tif (filter) {\n\t\tquery.push(`name contains '${filter.replace(\"'\", \"\\\\'\")}'`);\n\t}\n\tquery.push(\"mimeType = 'application/vnd.google-apps.folder'\");\n\tconst res = await googleApiRequest.call(this, 'GET', '/drive/v3/files', undefined, {\n\t\tq: query.join(' and '),\n\t\tpageToken: paginationToken,\n\t\tfields: 'nextPageToken,files(id,name,mimeType,webViewLink)',\n\t\torderBy: 'name_natural',\n\t});\n\treturn {\n\t\tresults: res.files.map((i: GoogleDriveFilesItem) => ({\n\t\t\tname: i.name,\n\t\t\tvalue: i.id,\n\t\t\turl: i.webViewLink,\n\t\t})),\n\t\tpaginationToken: res.nextPageToken,\n\t};\n}\n\nexport async function driveSearch(\n\tthis: ILoadOptionsFunctions,\n\tfilter?: string,\n\tpaginationToken?: string,\n): Promise<INodeListSearchResult> {\n\tconst res = await googleApiRequest.call(this, 'GET', '/drive/v3/drives', undefined, {\n\t\tq: filter ? `name contains '${filter.replace(\"'\", \"\\\\'\")}'` : undefined,\n\t\tpageToken: paginationToken,\n\t});\n\treturn {\n\t\tresults: res.drives.map((i: GoogleDriveDriveItem) => ({\n\t\t\tname: i.name,\n\t\t\tvalue: i.id,\n\t\t})),\n\t\tpaginationToken: res.nextPageToken,\n\t};\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,8BAAiC;AAcjC,eAAsB,WAErB,QACA,iBACiC;AACjC,QAAM,QAAkB,CAAC;AACzB,MAAI,QAAQ;AACX,UAAM,KAAK,kBAAkB,OAAO,QAAQ,KAAK,KAAK,CAAC,GAAG;AAAA,EAC3D;AACA,QAAM,KAAK,kDAAkD;AAC7D,QAAM,MAAM,MAAM,yCAAiB,KAAK,MAAM,OAAO,mBAAmB,QAAW;AAAA,IAClF,GAAG,MAAM,KAAK,OAAO;AAAA,IACrB,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,SAAS;AAAA,EACV,CAAC;AACD,SAAO;AAAA,IACN,SAAS,IAAI,MAAM,IAAI,CAAC,OAA6B;AAAA,MACpD,MAAM,EAAE;AAAA,MACR,OAAO,EAAE;AAAA,MACT,KAAK,EAAE;AAAA,IACR,EAAE;AAAA,IACF,iBAAiB,IAAI;AAAA,EACtB;AACD;AAEA,eAAsB,aAErB,QACA,iBACiC;AACjC,QAAM,QAAkB,CAAC;AACzB,MAAI,QAAQ;AACX,UAAM,KAAK,kBAAkB,OAAO,QAAQ,KAAK,KAAK,CAAC,GAAG;AAAA,EAC3D;AACA,QAAM,KAAK,iDAAiD;AAC5D,QAAM,MAAM,MAAM,yCAAiB,KAAK,MAAM,OAAO,mBAAmB,QAAW;AAAA,IAClF,GAAG,MAAM,KAAK,OAAO;AAAA,IACrB,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,SAAS;AAAA,EACV,CAAC;AACD,SAAO;AAAA,IACN,SAAS,IAAI,MAAM,IAAI,CAAC,OAA6B;AAAA,MACpD,MAAM,EAAE;AAAA,MACR,OAAO,EAAE;AAAA,MACT,KAAK,EAAE;AAAA,IACR,EAAE;AAAA,IACF,iBAAiB,IAAI;AAAA,EACtB;AACD;AAEA,eAAsB,YAErB,QACA,iBACiC;AACjC,QAAM,MAAM,MAAM,yCAAiB,KAAK,MAAM,OAAO,oBAAoB,QAAW;AAAA,IACnF,GAAG,SAAS,kBAAkB,OAAO,QAAQ,KAAK,KAAK,CAAC,MAAM;AAAA,IAC9D,WAAW;AAAA,EACZ,CAAC;AACD,SAAO;AAAA,IACN,SAAS,IAAI,OAAO,IAAI,CAAC,OAA6B;AAAA,MACrD,MAAM,EAAE;AAAA,MACR,OAAO,EAAE;AAAA,IACV,EAAE;AAAA,IACF,iBAAiB,IAAI;AAAA,EACtB;AACD;","names":[]}