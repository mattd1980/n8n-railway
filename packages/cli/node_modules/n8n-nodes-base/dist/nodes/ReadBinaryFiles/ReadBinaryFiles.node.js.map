{"version":3,"sources":["../../../nodes/ReadBinaryFiles/ReadBinaryFiles.node.ts"],"sourcesContent":["import glob from 'fast-glob';\nimport {\n\tNodeConnectionTypes,\n\ttype IExecuteFunctions,\n\ttype INodeExecutionData,\n\ttype INodeType,\n\ttype INodeTypeDescription,\n} from 'n8n-workflow';\n\nimport { generatePairedItemData } from '../../utils/utilities';\n\nexport class ReadBinaryFiles implements INodeType {\n\tdescription: INodeTypeDescription = {\n\t\thidden: true,\n\t\tdisplayName: 'Read Binary Files',\n\t\tname: 'readBinaryFiles',\n\t\ticon: 'fa:file-import',\n\t\tgroup: ['input'],\n\t\tversion: 1,\n\t\tdescription: 'Reads binary files from disk',\n\t\tdefaults: {\n\t\t\tname: 'Read Binary Files',\n\t\t\tcolor: '#44AA44',\n\t\t},\n\t\tinputs: [NodeConnectionTypes.Main],\n\t\toutputs: [NodeConnectionTypes.Main],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tdisplayName: 'File Selector',\n\t\t\t\tname: 'fileSelector',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\trequired: true,\n\t\t\t\tplaceholder: '*.jpg',\n\t\t\t\tdescription: 'Pattern for files to read',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Property Name',\n\t\t\t\tname: 'dataPropertyName',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: 'data',\n\t\t\t\trequired: true,\n\t\t\t\tdescription: 'Name of the binary property to which to write the data of the read files',\n\t\t\t},\n\t\t],\n\t};\n\n\tasync execute(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n\t\tconst fileSelector = this.getNodeParameter('fileSelector', 0) as string;\n\t\tconst dataPropertyName = this.getNodeParameter('dataPropertyName', 0);\n\t\tconst pairedItem = generatePairedItemData(this.getInputData().length);\n\n\t\tconst files = await glob(fileSelector);\n\n\t\tconst items: INodeExecutionData[] = [];\n\t\tfor (const filePath of files) {\n\t\t\tconst stream = await this.helpers.createReadStream(filePath);\n\t\t\titems.push({\n\t\t\t\tbinary: {\n\t\t\t\t\t[dataPropertyName]: await this.helpers.prepareBinaryData(stream, filePath),\n\t\t\t\t},\n\t\t\t\tjson: {},\n\t\t\t\tpairedItem,\n\t\t\t});\n\t\t}\n\n\t\treturn [items];\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAiB;AACjB,0BAMO;AAEP,uBAAuC;AAEhC,MAAM,gBAAqC;AAAA,EAA3C;AACN,uBAAoC;AAAA,MACnC,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO,CAAC,OAAO;AAAA,MACf,SAAS;AAAA,MACT,aAAa;AAAA,MACb,UAAU;AAAA,QACT,MAAM;AAAA,QACN,OAAO;AAAA,MACR;AAAA,MACA,QAAQ,CAAC,wCAAoB,IAAI;AAAA,MACjC,SAAS,CAAC,wCAAoB,IAAI;AAAA,MAClC,YAAY;AAAA,QACX;AAAA,UACC,aAAa;AAAA,UACb,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,UACb,aAAa;AAAA,QACd;AAAA,QACA;AAAA,UACC,aAAa;AAAA,UACb,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACd;AAAA,MACD;AAAA,IACD;AAAA;AAAA,EAEA,MAAM,UAAkE;AACvE,UAAM,eAAe,KAAK,iBAAiB,gBAAgB,CAAC;AAC5D,UAAM,mBAAmB,KAAK,iBAAiB,oBAAoB,CAAC;AACpE,UAAM,iBAAa,yCAAuB,KAAK,aAAa,EAAE,MAAM;AAEpE,UAAM,QAAQ,UAAM,iBAAAA,SAAK,YAAY;AAErC,UAAM,QAA8B,CAAC;AACrC,eAAW,YAAY,OAAO;AAC7B,YAAM,SAAS,MAAM,KAAK,QAAQ,iBAAiB,QAAQ;AAC3D,YAAM,KAAK;AAAA,QACV,QAAQ;AAAA,UACP,CAAC,gBAAgB,GAAG,MAAM,KAAK,QAAQ,kBAAkB,QAAQ,QAAQ;AAAA,QAC1E;AAAA,QACA,MAAM,CAAC;AAAA,QACP;AAAA,MACD,CAAC;AAAA,IACF;AAEA,WAAO,CAAC,KAAK;AAAA,EACd;AACD;","names":["glob"]}