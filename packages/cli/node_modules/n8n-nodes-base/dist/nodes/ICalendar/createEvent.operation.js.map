{"version":3,"sources":["../../../nodes/ICalendar/createEvent.operation.ts"],"sourcesContent":["import * as ics from 'ics';\nimport moment from 'moment-timezone';\nimport {\n\ttype IExecuteFunctions,\n\ttype IDataObject,\n\ttype INodeExecutionData,\n\ttype INodeProperties,\n\tNodeOperationError,\n} from 'n8n-workflow';\nimport { promisify } from 'util';\n\nconst createEvent = promisify(ics.createEvent);\n\nexport const description: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Event Title',\n\t\tname: 'title',\n\t\ttype: 'string',\n\t\tdefault: '',\n\t\tplaceholder: 'e.g. New Event',\n\t},\n\t{\n\t\tdisplayName: 'Start',\n\t\tname: 'start',\n\t\ttype: 'dateTime',\n\t\tdefault: '',\n\t\trequired: true,\n\t\tdescription:\n\t\t\t'Date and time at which the event begins. (For all-day events, the time will be ignored.).',\n\t},\n\t{\n\t\tdisplayName: 'End',\n\t\tname: 'end',\n\t\ttype: 'dateTime',\n\t\tdefault: '',\n\t\trequired: true,\n\t\tdescription:\n\t\t\t'Date and time at which the event ends. (For all-day events, the time will be ignored.).',\n\t\thint: 'If not set, will be equal to the start date',\n\t},\n\t{\n\t\tdisplayName: 'All Day',\n\t\tname: 'allDay',\n\t\ttype: 'boolean',\n\t\tdefault: false,\n\t\tdescription: 'Whether the event lasts all day or not',\n\t},\n\t{\n\t\tdisplayName: 'Put Output File in Field',\n\t\tname: 'binaryPropertyName',\n\t\ttype: 'string',\n\t\tdefault: 'data',\n\t\trequired: true,\n\t\thint: 'The name of the output binary field to put the file in',\n\t\tdescription: 'The field that your iCalendar file will be available under in the output',\n\t},\n\t{\n\t\tdisplayName: 'Options',\n\t\tname: 'additionalFields',\n\t\ttype: 'collection',\n\t\tplaceholder: 'Add option',\n\t\tdefault: {},\n\t\toptions: [\n\t\t\t{\n\t\t\t\tdisplayName: 'Attendees',\n\t\t\t\tname: 'attendeesUi',\n\t\t\t\ttype: 'fixedCollection',\n\t\t\t\ttypeOptions: {\n\t\t\t\t\tmultipleValues: true,\n\t\t\t\t},\n\t\t\t\tplaceholder: 'Add Attendee',\n\t\t\t\tdefault: {},\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Attendees',\n\t\t\t\t\t\tname: 'attendeeValues',\n\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Name',\n\t\t\t\t\t\t\t\tname: 'name',\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Email',\n\t\t\t\t\t\t\t\tname: 'email',\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tplaceholder: 'e.g. name@email.com',\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'RSVP',\n\t\t\t\t\t\t\t\tname: 'rsvp',\n\t\t\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\t\t\tdefault: false,\n\t\t\t\t\t\t\t\tdescription: 'Whether the attendee has to confirm attendance or not',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Busy Status',\n\t\t\t\tname: 'busyStatus',\n\t\t\t\ttype: 'options',\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Busy',\n\t\t\t\t\t\tvalue: 'BUSY',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Tentative',\n\t\t\t\t\t\tvalue: 'TENTATIVE',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: '',\n\t\t\t\tdescription: 'Used to specify busy status for Microsoft applications, like Outlook',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Calendar Name',\n\t\t\t\tname: 'calName',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tdescription:\n\t\t\t\t\t'Specifies the calendar (not event) name. Used by Apple iCal and Microsoft Outlook. <a href=\"https://docs.microsoft.com/en-us/openspecs/exchange_server_protocols/ms-oxcical/1da58449-b97e-46bd-b018-a1ce576f3e6d\">More info</a>.',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Description',\n\t\t\t\tname: 'description',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'File Name',\n\t\t\t\tname: 'fileName',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tplaceholder: 'e.g. event.ics',\n\t\t\t\tdescription: 'The name of the file to be generated. Default name is event.ics.',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Geolocation',\n\t\t\t\tname: 'geolocationUi',\n\t\t\t\ttype: 'fixedCollection',\n\t\t\t\ttypeOptions: {\n\t\t\t\t\tmultipleValues: false,\n\t\t\t\t},\n\t\t\t\tplaceholder: 'Add Geolocation',\n\t\t\t\tdefault: {},\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Geolocation',\n\t\t\t\t\t\tname: 'geolocationValues',\n\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Latitude',\n\t\t\t\t\t\t\t\tname: 'lat',\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Longitude',\n\t\t\t\t\t\t\t\tname: 'lon',\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Location',\n\t\t\t\tname: 'location',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tdescription: 'The intended venue',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Recurrence Rule',\n\t\t\t\tname: 'recurrenceRule',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tdescription:\n\t\t\t\t\t'A rule to define the repeat pattern of the event (RRULE). (<a href=\"https://icalendar.org/rrule-tool.html\">Rule generator</a>).',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Organizer',\n\t\t\t\tname: 'organizerUi',\n\t\t\t\ttype: 'fixedCollection',\n\t\t\t\ttypeOptions: {\n\t\t\t\t\tmultipleValues: false,\n\t\t\t\t},\n\t\t\t\tplaceholder: 'Add Organizer',\n\t\t\t\tdefault: {},\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Organizer',\n\t\t\t\t\t\tname: 'organizerValues',\n\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Name',\n\t\t\t\t\t\t\t\tname: 'name',\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Email',\n\t\t\t\t\t\t\t\tname: 'email',\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tplaceholder: 'e.g. name@email.com',\n\t\t\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Sequence',\n\t\t\t\tname: 'sequence',\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: 0,\n\t\t\t\tdescription:\n\t\t\t\t\t'When sending an update for an event (with the same uid), defines the revision sequence number',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Status',\n\t\t\t\tname: 'status',\n\t\t\t\ttype: 'options',\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Confirmed',\n\t\t\t\t\t\tvalue: 'CONFIRMED',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Cancelled',\n\t\t\t\t\t\tvalue: 'CANCELLED',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Tentative',\n\t\t\t\t\t\tvalue: 'TENTATIVE',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdefault: 'CONFIRMED',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'UID',\n\t\t\t\tname: 'uid',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tdescription:\n\t\t\t\t\t'Universally unique ID for the event (will be auto-generated if not specified here). Should be globally unique.',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'URL',\n\t\t\t\tname: 'url',\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t\tdescription: 'URL associated with event',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Use Workflow Timezone',\n\t\t\t\tname: 'useWorkflowTimezone',\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: false,\n\t\t\t\tdescription: \"Whether to use the workflow timezone set in node's settings rather than UTC\",\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport async function execute(this: IExecuteFunctions, items: INodeExecutionData[]) {\n\tconst returnData: INodeExecutionData[] = [];\n\tconst workflowTimezone = this.getTimezone();\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\ttry {\n\t\t\tconst title = this.getNodeParameter('title', i) as string;\n\t\t\tconst allDay = this.getNodeParameter('allDay', i) as boolean;\n\n\t\t\tlet start = this.getNodeParameter('start', i) as string;\n\t\t\tlet end = this.getNodeParameter('end', i) as string;\n\n\t\t\tif (!end) {\n\t\t\t\tend = start;\n\t\t\t}\n\n\t\t\tend = allDay ? moment(end).utc().add(1, 'day').format() : end;\n\n\t\t\tconst binaryPropertyName = this.getNodeParameter('binaryPropertyName', i);\n\t\t\tconst options = this.getNodeParameter('additionalFields', i);\n\n\t\t\tif (options.useWorkflowTimezone) {\n\t\t\t\tstart = moment(start).tz(workflowTimezone).format();\n\t\t\t\tend = moment(end).tz(workflowTimezone).format();\n\t\t\t\tdelete options.useWorkflowTimezone;\n\t\t\t}\n\n\t\t\tlet fileName = 'event.ics';\n\n\t\t\tconst eventStart = moment(start)\n\t\t\t\t.toArray()\n\t\t\t\t.splice(0, allDay ? 3 : 6) as ics.DateArray;\n\t\t\teventStart[1]++;\n\n\t\t\tconst eventEnd = moment(end)\n\t\t\t\t.toArray()\n\t\t\t\t.splice(0, allDay ? 3 : 6) as ics.DateArray;\n\t\t\teventEnd[1]++;\n\n\t\t\tif (options.fileName) {\n\t\t\t\tfileName = options.fileName as string;\n\t\t\t}\n\n\t\t\tconst data: ics.EventAttributes = {\n\t\t\t\ttitle,\n\t\t\t\tstart: eventStart,\n\t\t\t\tend: eventEnd,\n\t\t\t\tstartInputType: 'utc',\n\t\t\t\tendInputType: 'utc',\n\t\t\t};\n\n\t\t\tif (options.geolocationUi) {\n\t\t\t\tdata.geo = (options.geolocationUi as IDataObject).geolocationValues as ics.GeoCoordinates;\n\t\t\t\tdelete options.geolocationUi;\n\t\t\t}\n\n\t\t\tif (options.organizerUi) {\n\t\t\t\tdata.organizer = (options.organizerUi as IDataObject).organizerValues as ics.Person;\n\t\t\t\tdelete options.organizerUi;\n\t\t\t}\n\n\t\t\tif (options.attendeesUi) {\n\t\t\t\tdata.attendees = (options.attendeesUi as IDataObject).attendeeValues as ics.Attendee[];\n\t\t\t\tdelete options.attendeesUi;\n\t\t\t}\n\n\t\t\tObject.assign(data, options);\n\t\t\tconst buffer = Buffer.from((await createEvent(data)) as string);\n\t\t\tconst binaryData = await this.helpers.prepareBinaryData(buffer, fileName, 'text/calendar');\n\t\t\treturnData.push({\n\t\t\t\tjson: {},\n\t\t\t\tbinary: {\n\t\t\t\t\t[binaryPropertyName]: binaryData,\n\t\t\t\t},\n\t\t\t\tpairedItem: {\n\t\t\t\t\titem: i,\n\t\t\t\t},\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconst errorDescription = error.description;\n\t\t\tif (this.continueOnFail()) {\n\t\t\t\treturnData.push({\n\t\t\t\t\tjson: {\n\t\t\t\t\t\terror: error.message,\n\t\t\t\t\t},\n\t\t\t\t\tpairedItem: {\n\t\t\t\t\t\titem: i,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthrow new NodeOperationError(this.getNode(), error, {\n\t\t\t\titemIndex: i,\n\t\t\t\tdescription: errorDescription,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn returnData;\n}\n"],"mappings":"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","names":["moment"]}